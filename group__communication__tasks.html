<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>ruuvi.drivers.c: Sending and receiving data.</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ruuvi.drivers.c
   &#160;<span id="projectnumber">0.1.3</span>
   </div>
   <div id="projectbrief">Drivers for external sensors and peripherals on embedded systems.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__communication__tasks.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Sending and receiving data.</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__advertisement__tasks"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__advertisement__tasks.html">Advertisement tasks</a></td></tr>
<tr class="memdesc:group__advertisement__tasks"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bluetooth Low Energy advertising. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gabe5b8da48baa20dca6c0852ce00fce9e"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__communication__tasks.html#gabe5b8da48baa20dca6c0852ce00fce9e">heartbeat_data_fp_t</a> )(uint8_t *const msg)</td></tr>
<tr class="memdesc:gabe5b8da48baa20dca6c0852ce00fce9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to get heartbeat data.  <a href="#gabe5b8da48baa20dca6c0852ce00fce9e">More...</a><br/></td></tr>
<tr class="separator:gabe5b8da48baa20dca6c0852ce00fce9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga65ac737a9fd4b160fa6c6d8105d0bcce"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__communication__tasks.html#ga65ac737a9fd4b160fa6c6d8105d0bcce">rt_gatt_cb_t</a> )(void *p_data, size_t data_len)</td></tr>
<tr class="separator:ga65ac737a9fd4b160fa6c6d8105d0bcce"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8801a511fcc36d0861f13c9b884b9f87"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__communication__tasks.html#ga8801a511fcc36d0861f13c9b884b9f87">rt_com_heartbeat_configure</a> (const uint32_t interval_ms, const size_t max_len, const <a class="el" href="group__communication__tasks.html#gabe5b8da48baa20dca6c0852ce00fce9e">heartbeat_data_fp_t</a> data_src, const <a class="el" href="ruuvi__interface__communication_8h.html#a018fd09a3e68c9f7d23a9e935aff7d48">ri_communication_xfer_fp_t</a> send)</td></tr>
<tr class="memdesc:ga8801a511fcc36d0861f13c9b884b9f87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start sending a "hearbeat" signal over given channel to a connected device(s).  <a href="#ga8801a511fcc36d0861f13c9b884b9f87">More...</a><br/></td></tr>
<tr class="separator:ga8801a511fcc36d0861f13c9b884b9f87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga93ac1d4023cf91f77df3521850f804e4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__communication__tasks.html#ga93ac1d4023cf91f77df3521850f804e4">rt_com_get_mac</a> (uint8_t *const mac_buffer)</td></tr>
<tr class="memdesc:ga93ac1d4023cf91f77df3521850f804e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">get MAC address of the device from radio driver and write it to given buffer.  <a href="#ga93ac1d4023cf91f77df3521850f804e4">More...</a><br/></td></tr>
<tr class="separator:ga93ac1d4023cf91f77df3521850f804e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga06a00ac86cfffae32ae5e93cf397354f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__communication__tasks.html#ga06a00ac86cfffae32ae5e93cf397354f">rt_com_get_id</a> (uint8_t *const id_buffer)</td></tr>
<tr class="memdesc:ga06a00ac86cfffae32ae5e93cf397354f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get Unique ID of the device.  <a href="#ga06a00ac86cfffae32ae5e93cf397354f">More...</a><br/></td></tr>
<tr class="separator:ga06a00ac86cfffae32ae5e93cf397354f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5d129ed10c9f44b2ba85e79a45f1b9d9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__communication__tasks.html#ga5d129ed10c9f44b2ba85e79a45f1b9d9">rt_gatt_send_asynchronous</a> (<a class="el" href="structri__communication__message__t.html">ri_communication_message_t</a> *const msg)</td></tr>
<tr class="memdesc:ga5d129ed10c9f44b2ba85e79a45f1b9d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send given message via NUS.  <a href="#ga5d129ed10c9f44b2ba85e79a45f1b9d9">More...</a><br/></td></tr>
<tr class="separator:ga5d129ed10c9f44b2ba85e79a45f1b9d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga139070929d032682fc71e5c5156d8fd5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__communication__tasks.html#ga139070929d032682fc71e5c5156d8fd5">rt_gatt_dfu_init</a> (void)</td></tr>
<tr class="memdesc:ga139070929d032682fc71e5c5156d8fd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize Device Firmware Update service.  <a href="#ga139070929d032682fc71e5c5156d8fd5">More...</a><br/></td></tr>
<tr class="separator:ga139070929d032682fc71e5c5156d8fd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabc30977c7c27769e497d8a66e2a30411"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__communication__tasks.html#gabc30977c7c27769e497d8a66e2a30411">rt_gatt_dis_init</a> (const <a class="el" href="structri__gatt__dis__init__t.html">ri_gatt_dis_init_t</a> *const dis)</td></tr>
<tr class="memdesc:gabc30977c7c27769e497d8a66e2a30411"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize Device Information Update service.  <a href="#gabc30977c7c27769e497d8a66e2a30411">More...</a><br/></td></tr>
<tr class="separator:gabc30977c7c27769e497d8a66e2a30411"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac8339ef98c77d9edd51c63d946e1f884"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__communication__tasks.html#gac8339ef98c77d9edd51c63d946e1f884">rt_gatt_nus_init</a> ()</td></tr>
<tr class="memdesc:gac8339ef98c77d9edd51c63d946e1f884"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize Nordic UART Service.  <a href="#gac8339ef98c77d9edd51c63d946e1f884">More...</a><br/></td></tr>
<tr class="separator:gac8339ef98c77d9edd51c63d946e1f884"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga623fc835a2308e37eef441a8e48c982e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__communication__tasks.html#ga623fc835a2308e37eef441a8e48c982e">rt_gatt_init</a> (const char *const name)</td></tr>
<tr class="memdesc:ga623fc835a2308e37eef441a8e48c982e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize GATT. Must be called as a first function in rt_gatt.  <a href="#ga623fc835a2308e37eef441a8e48c982e">More...</a><br/></td></tr>
<tr class="separator:ga623fc835a2308e37eef441a8e48c982e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab961c0f92c54b3436e936371a77c1e54"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__communication__tasks.html#gab961c0f92c54b3436e936371a77c1e54">rt_gatt_enable</a> ()</td></tr>
<tr class="memdesc:gab961c0f92c54b3436e936371a77c1e54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start advertising GATT connection to devices.  <a href="#gab961c0f92c54b3436e936371a77c1e54">More...</a><br/></td></tr>
<tr class="separator:gab961c0f92c54b3436e936371a77c1e54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga82f8f1981365e03f04a267297b78260c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__communication__tasks.html#ga82f8f1981365e03f04a267297b78260c">rt_gatt_disable</a> ()</td></tr>
<tr class="memdesc:ga82f8f1981365e03f04a267297b78260c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop advertising GATT connection to devices.  <a href="#ga82f8f1981365e03f04a267297b78260c">More...</a><br/></td></tr>
<tr class="separator:ga82f8f1981365e03f04a267297b78260c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7050962a92e95b94105f00b80e5ce92d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__communication__tasks.html#ga7050962a92e95b94105f00b80e5ce92d">rt_gatt_is_init</a> ()</td></tr>
<tr class="memdesc:ga7050962a92e95b94105f00b80e5ce92d"><td class="mdescLeft">&#160;</td><td class="mdescRight">check if GATT task is initialized  <a href="#ga7050962a92e95b94105f00b80e5ce92d">More...</a><br/></td></tr>
<tr class="separator:ga7050962a92e95b94105f00b80e5ce92d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga05a1cbb656e68095593e811dd950ce91"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__communication__tasks.html#ga05a1cbb656e68095593e811dd950ce91">rt_gatt_nus_is_connected</a> ()</td></tr>
<tr class="memdesc:ga05a1cbb656e68095593e811dd950ce91"><td class="mdescLeft">&#160;</td><td class="mdescRight">check if NUS is connected, i.e. central has registered to TX notifications.  <a href="#ga05a1cbb656e68095593e811dd950ce91">More...</a><br/></td></tr>
<tr class="separator:ga05a1cbb656e68095593e811dd950ce91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac01e431f50326f8f8e7960b4278b18a3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__communication__tasks.html#gac01e431f50326f8f8e7960b4278b18a3">rt_gatt_is_nus_enabled</a> ()</td></tr>
<tr class="memdesc:gac01e431f50326f8f8e7960b4278b18a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if Nordic UART Service is enabled.  <a href="#gac01e431f50326f8f8e7960b4278b18a3">More...</a><br/></td></tr>
<tr class="separator:gac01e431f50326f8f8e7960b4278b18a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacb5caf4e0a28dd4cd7dcf31f1f052638"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__communication__tasks.html#gacb5caf4e0a28dd4cd7dcf31f1f052638">rt_gatt_set_on_connected_isr</a> (const <a class="el" href="group__communication__tasks.html#ga65ac737a9fd4b160fa6c6d8105d0bcce">rt_gatt_cb_t</a> cb)</td></tr>
<tr class="memdesc:gacb5caf4e0a28dd4cd7dcf31f1f052638"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup connection event handler.  <a href="#gacb5caf4e0a28dd4cd7dcf31f1f052638">More...</a><br/></td></tr>
<tr class="separator:gacb5caf4e0a28dd4cd7dcf31f1f052638"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabece874ef1788cf61ac477276a160ed5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__communication__tasks.html#gabece874ef1788cf61ac477276a160ed5">rt_gatt_set_on_disconn_isr</a> (const <a class="el" href="group__communication__tasks.html#ga65ac737a9fd4b160fa6c6d8105d0bcce">rt_gatt_cb_t</a> cb)</td></tr>
<tr class="memdesc:gabece874ef1788cf61ac477276a160ed5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup disconnection event handler.  <a href="#gabece874ef1788cf61ac477276a160ed5">More...</a><br/></td></tr>
<tr class="separator:gabece874ef1788cf61ac477276a160ed5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf908c2c648dc52fc4c9fe52140f2fa4b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__communication__tasks.html#gaf908c2c648dc52fc4c9fe52140f2fa4b">rt_gatt_set_on_received_isr</a> (const <a class="el" href="group__communication__tasks.html#ga65ac737a9fd4b160fa6c6d8105d0bcce">rt_gatt_cb_t</a> cb)</td></tr>
<tr class="memdesc:gaf908c2c648dc52fc4c9fe52140f2fa4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup data received event handler.  <a href="#gaf908c2c648dc52fc4c9fe52140f2fa4b">More...</a><br/></td></tr>
<tr class="separator:gaf908c2c648dc52fc4c9fe52140f2fa4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacd68d76de005a38b445e0290cfa04617"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__communication__tasks.html#gacd68d76de005a38b445e0290cfa04617">rt_gatt_set_on_sent_isr</a> (const <a class="el" href="group__communication__tasks.html#ga65ac737a9fd4b160fa6c6d8105d0bcce">rt_gatt_cb_t</a> cb)</td></tr>
<tr class="memdesc:gacd68d76de005a38b445e0290cfa04617"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setup data sent event handler.  <a href="#gacd68d76de005a38b445e0290cfa04617">More...</a><br/></td></tr>
<tr class="separator:gacd68d76de005a38b445e0290cfa04617"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="gabe5b8da48baa20dca6c0852ce00fce9e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>(* heartbeat_data_fp_t)(uint8_t *const msg)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to get heartbeat data. </p>

<p>Definition at line <a class="el" href="ruuvi__task__communication_8h_source.html#l00024">24</a> of file <a class="el" href="ruuvi__task__communication_8h_source.html">ruuvi_task_communication.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga65ac737a9fd4b160fa6c6d8105d0bcce"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* rt_gatt_cb_t)(void *p_data, size_t data_len)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ruuvi__task__gatt_8h_source.html#l00032">32</a> of file <a class="el" href="ruuvi__task__gatt_8h_source.html">ruuvi_task_gatt.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga06a00ac86cfffae32ae5e93cf397354f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> rt_com_get_id </td>
          <td>(</td>
          <td class="paramtype">uint8_t *const&#160;</td>
          <td class="paramname"><em>id_buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get Unique ID of the device. </p>
<p>The ID will remain constant even if MAC is changed. The ID must remain same across reboots and firmware updates.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">id_buffer</td><td>8-character array </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RD_SUCCESS</td><td>if mac buffer was written </td></tr>
    <tr><td class="paramname">RD_ERROR_NULL</td><td>if mac_buffer was NULL </td></tr>
    <tr><td class="paramname">RD_ERROR_INVALID_STATE</td><td>if radio is not initialized </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga93ac1d4023cf91f77df3521850f804e4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> rt_com_get_mac </td>
          <td>(</td>
          <td class="paramtype">uint8_t *const&#160;</td>
          <td class="paramname"><em>mac_buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get MAC address of the device from radio driver and write it to given buffer. </p>
<p>The MAC address (or Bluetooth Address) is presented as most significant byte first, if your Bluetooth scanner shows "AA:BB:CC:DD:EE:FF" the mac_buffer will have 0xAA, BB, CC, DD, EE, FF.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">mac_buffer</td><td>6-character array </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RD_SUCCESS</td><td>if mac buffer was written </td></tr>
    <tr><td class="paramname">RD_ERROR_NULL</td><td>if mac_buffer was NULL </td></tr>
    <tr><td class="paramname">RD_ERROR_INVALID_STATE</td><td>if radio is not initialized </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga8801a511fcc36d0861f13c9b884b9f87"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> rt_com_heartbeat_configure </td>
          <td>(</td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>interval_ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>max_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__communication__tasks.html#gabe5b8da48baa20dca6c0852ce00fce9e">heartbeat_data_fp_t</a>&#160;</td>
          <td class="paramname"><em>data_src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="ruuvi__interface__communication_8h.html#a018fd09a3e68c9f7d23a9e935aff7d48">ri_communication_xfer_fp_t</a>&#160;</td>
          <td class="paramname"><em>send</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start sending a "hearbeat" signal over given channel to a connected device(s). </p>
<p>The heartbeats are continuous data transmissions, such as current sensor values. It's a good practice to reset watchdog timer in heartbeat function, and nowhere else. New heartbeat can be configured over old one without stopping.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">interval_ms</td><td>interval to send the data, in milliseconds. Set to 0 to stop the heartbeat </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_len</td><td>Maximum length of data to send. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data_src</td><td>function to generate the heartbeat message </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">send</td><td>function pointer to send the data through. May be NULL if interval is 0.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RD_SUCCESS</td><td>if heartbeat was initialized (or stopped) </td></tr>
    <tr><td class="paramname">RD_ERROR_INVALID_STATE</td><td>if timer cannot be initialized. </td></tr>
    <tr><td class="paramname">RD_ERROR_NULL</td><td>if interval wasn't 0 and send is NULL </td></tr>
    <tr><td class="paramname">error</td><td>code from stack on other error. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga139070929d032682fc71e5c5156d8fd5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> rt_gatt_dfu_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize Device Firmware Update service. </p>
<p>GATT must be initialized before calling this function, and once initialized the DFU service cannot be uninitialized.</p>
<p>Call will return successfully even if the device doesn't have useable bootloader, however program will reboot if user tries to enter bootloader in that case.</p>
<p>To use the DFU service advertisement module must send connectable (and preferably scannable) advertisements.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RD_SUCCESS</td><td>GATT was initialized successfully </td></tr>
    <tr><td class="paramname">RD_ERROR_INVALID_STATE</td><td>DFU was already initialized or GATT is not initialized </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gabc30977c7c27769e497d8a66e2a30411"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> rt_gatt_dis_init </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structri__gatt__dis__init__t.html">ri_gatt_dis_init_t</a> *const&#160;</td>
          <td class="paramname"><em>dis</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize Device Information Update service. </p>
<p>GATT must be initialized before calling this function, and once initialized the DIS service cannot be uninitialized.</p>
<p>DIS service lets user read basic information, such as firmware version and hardware model over GATT in a standard format.</p>
<p>To use the DIS service advertisement module must send connectable (and preferably scannable) advertisements.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">dis</td><td>structure containing data to be copied into DIS, can be freed after call finishes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RD_SUCCESS</td><td>GATT was initialized successfully </td></tr>
    <tr><td class="paramname">RD_ERROR_NULL</td><td>if given NULL as the information. </td></tr>
    <tr><td class="paramname">RD_ERROR_INVALID_STATE</td><td>DIS was already initialized or GATT is not initialized </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga82f8f1981365e03f04a267297b78260c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> rt_gatt_disable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop advertising GATT connection to devices. </p>
<p>Calling this function is not enough to stop advertising connection, you must also update advertised data to remove the scan response from data being advertised. This makes sure that advertised data stays valid. This function has not effect if called while already disabled</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RD_SUCCESS</td><td>on success </td></tr>
    <tr><td class="paramname">RD_ERROR_INVALID_STATE</td><td>if GATT is not initialized. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gab961c0f92c54b3436e936371a77c1e54"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> rt_gatt_enable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start advertising GATT connection to devices. </p>
<p>Calling this function is not enough to let users to connect, you must also update advertised data to add the scan response to data being advertised. This makes sure that advertised data stays valid. This function has no effect if called while already enabled.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RD_SUCCESS</td><td>on success </td></tr>
    <tr><td class="paramname">RD_ERROR_INVALID_STATE</td><td>if GATT is not initialized. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga623fc835a2308e37eef441a8e48c982e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> rt_gatt_init </td>
          <td>(</td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize GATT. Must be called as a first function in rt_gatt. </p>
<p>After calling this function underlying software stack is ready to setup GATT services.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>Full name of device to be advertised in scan responses. Maximum 11 chars + trailing NULL. Must not be NULL, 0-length string is valid.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RD_SUCCESS</td><td>on success. </td></tr>
    <tr><td class="paramname">RD_ERROR_NULL</td><td>if name is NULL (use 0-length string instead) </td></tr>
    <tr><td class="paramname">RD_ERROR_INVALID_LENGTH</td><td>if name is longer than <a class="el" href="group__advertisement__tasks.html#gafced29518d21647a9960e4905bf5260f">SCAN_RSP_NAME_MAX_LEN</a> </td></tr>
    <tr><td class="paramname">RD_ERROR_INVALID_STATE</td><td>if GATT is already initialized or advertisements are not initialized. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga7050962a92e95b94105f00b80e5ce92d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rt_gatt_is_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>check if GATT task is initialized </p>
<dl class="section return"><dt>Returns</dt><dd>true if GATT is initialized, false otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="gac01e431f50326f8f8e7960b4278b18a3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rt_gatt_is_nus_enabled </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if Nordic UART Service is enabled. </p>
<p>The event handler has signature of </p>
<div class="fragment"><div class="line">void(*<a class="code" href="group__communication__tasks.html#ga65ac737a9fd4b160fa6c6d8105d0bcce">rt_gatt_cb_t</a>)(<span class="keywordtype">void</span>* p_event_data, uint16_t event_size) </div>
</div><!-- fragment --><p> where event data is NULL and event_size is 0. The event handler is called in interrupt context.</p>
<dl class="section return"><dt>Returns</dt><dd>true if GATT is initialized and ready to accept connection, false otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="gac8339ef98c77d9edd51c63d946e1f884"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> rt_gatt_nus_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize Nordic UART Service. </p>
<p>GATT must be initialized before calling this function, and once initialized the NUS service cannot be uninitialized.</p>
<p>NUS service lets user do bidirectional communication with the application.</p>
<p>To use the NUS service advertisement module must send connectable (and preferably scannable) advertisements.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RD_SUCCESS</td><td>GATT was initialized successfully </td></tr>
    <tr><td class="paramname">RD_ERROR_NULL</td><td>if given NULL as the information. </td></tr>
    <tr><td class="paramname">RD_ERROR_INVALID_STATE</td><td>DIS was already initialized or GATT is not initialized</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>To actually use the data in application, user must setup at least data received callback with <a class="el" href="group__communication__tasks.html#gaf908c2c648dc52fc4c9fe52140f2fa4b">rt_gatt_set_on_received_isr</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga05a1cbb656e68095593e811dd950ce91"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rt_gatt_nus_is_connected </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>check if NUS is connected, i.e. central has registered to TX notifications. </p>
<dl class="section return"><dt>Returns</dt><dd>true if NUS is connected is initialized, false otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="ga5d129ed10c9f44b2ba85e79a45f1b9d9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> rt_gatt_send_asynchronous </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structri__communication__message__t.html">ri_communication_message_t</a> *const&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send given message via NUS. </p>
<p>This function queues a message to be sent and returns immediately. There is no guarantee on when the data is actually sent, and there is no acknowledgement or callback after the data has been sent.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RD_SUCCESS</td><td>if data was placed in send buffer </td></tr>
    <tr><td class="paramname">RD_ERROR_INVALID_STATE</td><td>if NUS is not connected </td></tr>
    <tr><td class="paramname">RD_ERROR_NO_MEM</td><td>if tx buffer is full </td></tr>
    <tr><td class="paramname">error</td><td>code from stack on other error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gacb5caf4e0a28dd4cd7dcf31f1f052638"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rt_gatt_set_on_connected_isr </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__communication__tasks.html#ga65ac737a9fd4b160fa6c6d8105d0bcce">rt_gatt_cb_t</a>&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup connection event handler. </p>
<p>The event handler has signature of</p>
<div class="fragment"><div class="line">void(*<a class="code" href="group__communication__tasks.html#ga65ac737a9fd4b160fa6c6d8105d0bcce">rt_gatt_cb_t</a>)(<span class="keywordtype">void</span>* p_event_data, uint16_t event_size) </div>
</div><!-- fragment --><p> where event data is NULL and event_size is 0. The event handler is called in interrupt context.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cb</td><td>Callback which gets called on connection in interrupt context. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gabece874ef1788cf61ac477276a160ed5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rt_gatt_set_on_disconn_isr </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__communication__tasks.html#ga65ac737a9fd4b160fa6c6d8105d0bcce">rt_gatt_cb_t</a>&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup disconnection event handler. </p>
<p>The event handler has signature of</p>
<div class="fragment"><div class="line">void(*<a class="code" href="group__communication__tasks.html#ga65ac737a9fd4b160fa6c6d8105d0bcce">rt_gatt_cb_t</a>)(<span class="keywordtype">void</span>* p_event_data, uint16_t event_size) </div>
</div><!-- fragment --><p> where event data is NULL and event_size is 0. The event handler is called in interrupt context.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cb</td><td>Callback which gets called on disconnection in interrupt context. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gaf908c2c648dc52fc4c9fe52140f2fa4b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rt_gatt_set_on_received_isr </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__communication__tasks.html#ga65ac737a9fd4b160fa6c6d8105d0bcce">rt_gatt_cb_t</a>&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup data received event handler. </p>
<p>The event handler has signature of</p>
<div class="fragment"><div class="line">void(*<a class="code" href="group__communication__tasks.html#ga65ac737a9fd4b160fa6c6d8105d0bcce">rt_gatt_cb_t</a>)(<span class="keywordtype">void</span>* p_event_data, uint16_t event_size) </div>
</div><!-- fragment --><p> where event data is NULL and event_size is 0. The event handler is called in interrupt context.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cb</td><td>Callback which gets called on data received in interrupt context. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gacd68d76de005a38b445e0290cfa04617"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rt_gatt_set_on_sent_isr </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__communication__tasks.html#ga65ac737a9fd4b160fa6c6d8105d0bcce">rt_gatt_cb_t</a>&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setup data sent event handler. </p>
<p>The event handler has signature of</p>
<div class="fragment"><div class="line">void(*<a class="code" href="group__communication__tasks.html#ga65ac737a9fd4b160fa6c6d8105d0bcce">rt_gatt_cb_t</a>)(<span class="keywordtype">void</span>* p_event_data, uint16_t event_size) </div>
</div><!-- fragment --><p> where event data is NULL and event_size is 0. The event handler is called in interrupt context.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cb</td><td>Callback which gets called on data sent in interrupt context. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
