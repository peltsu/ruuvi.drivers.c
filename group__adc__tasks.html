<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>ruuvi.drivers.c: ADC tasks</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ruuvi.drivers.c
   &#160;<span id="projectnumber">0.1.3</span>
   </div>
   <div id="projectbrief">Drivers for external sensors and peripherals on embedded systems.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__adc__tasks.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ADC tasks</div>  </div>
</div><!--header-->
<div class="contents">

<p>Internal Analog-to-digital converter control.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:ruuvi__task__adc_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ruuvi__task__adc_8h.html">ruuvi_task_adc.h</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga5439776452b55b1c2fe7c86228513f6c"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__tasks.html#ga5439776452b55b1c2fe7c86228513f6c">rt_adc_mode_t</a> { <a class="el" href="group__adc__tasks.html#gga5439776452b55b1c2fe7c86228513f6cab7e95ded810bd44cd862c100fddacd5d">RATIOMETRIC</a>, 
<a class="el" href="group__adc__tasks.html#gga5439776452b55b1c2fe7c86228513f6cac45fae60f994b1b3d5dd2556265f3415">ABSOLUTE</a>
 }</td></tr>
<tr class="separator:ga5439776452b55b1c2fe7c86228513f6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga294f05381ed2e2b12015e9f6dd1581b6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__tasks.html#ga294f05381ed2e2b12015e9f6dd1581b6">rt_adc_init</a> (void)</td></tr>
<tr class="memdesc:ga294f05381ed2e2b12015e9f6dd1581b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reserve ADC.  <a href="#ga294f05381ed2e2b12015e9f6dd1581b6">More...</a><br/></td></tr>
<tr class="separator:ga294f05381ed2e2b12015e9f6dd1581b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6e2446360fe3828f59496329595e847c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__tasks.html#ga6e2446360fe3828f59496329595e847c">rt_adc_uninit</a> (void)</td></tr>
<tr class="memdesc:ga6e2446360fe3828f59496329595e847c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uninitialize ADC to release it for other users.  <a href="#ga6e2446360fe3828f59496329595e847c">More...</a><br/></td></tr>
<tr class="separator:ga6e2446360fe3828f59496329595e847c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9bef543f5bd481100310cc8e4332ac94"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__tasks.html#ga9bef543f5bd481100310cc8e4332ac94">rt_adc_is_init</a> (void)</td></tr>
<tr class="memdesc:ga9bef543f5bd481100310cc8e4332ac94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if ADC is initialized.  <a href="#ga9bef543f5bd481100310cc8e4332ac94">More...</a><br/></td></tr>
<tr class="separator:ga9bef543f5bd481100310cc8e4332ac94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga220cd03e1cb4d655caf244d645fe24cb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__tasks.html#ga220cd03e1cb4d655caf244d645fe24cb">rt_adc_configure_se</a> (<a class="el" href="structrd__sensor__configuration__t.html">rd_sensor_configuration_t</a> *const config, const uint8_t <a class="el" href="ruuvi__interface__lis2dh12_8c.html#a1699094a55a0394ff884346e034df54c">handle</a>, const <a class="el" href="group__adc__tasks.html#ga5439776452b55b1c2fe7c86228513f6c">rt_adc_mode_t</a> <a class="el" href="ruuvi__interface__lis2dh12_8c.html#a37e90f5e3bd99fac2021fb3a326607d4">mode</a>)</td></tr>
<tr class="memdesc:ga220cd03e1cb4d655caf244d645fe24cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure ADC before sampling.  <a href="#ga220cd03e1cb4d655caf244d645fe24cb">More...</a><br/></td></tr>
<tr class="separator:ga220cd03e1cb4d655caf244d645fe24cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga74753d7100835ef308174c74ee6ce7bc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__tasks.html#ga74753d7100835ef308174c74ee6ce7bc">rt_adc_sample</a> (void)</td></tr>
<tr class="memdesc:ga74753d7100835ef308174c74ee6ce7bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Take a new sample on ADC configured in single-shot/sleep mode.  <a href="#ga74753d7100835ef308174c74ee6ce7bc">More...</a><br/></td></tr>
<tr class="separator:ga74753d7100835ef308174c74ee6ce7bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabe0bcf05f3e017d0f54e7cf0cb0afec7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__tasks.html#gabe0bcf05f3e017d0f54e7cf0cb0afec7">rt_adc_voltage_get</a> (<a class="el" href="structrd__sensor__data__t.html">rd_sensor_data_t</a> *const data)</td></tr>
<tr class="memdesc:gabe0bcf05f3e017d0f54e7cf0cb0afec7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Populate data with latest sample.  <a href="#gabe0bcf05f3e017d0f54e7cf0cb0afec7">More...</a><br/></td></tr>
<tr class="separator:gabe0bcf05f3e017d0f54e7cf0cb0afec7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7c38e9b12e5ee0b7fd12631dd534512f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__tasks.html#ga7c38e9b12e5ee0b7fd12631dd534512f">rt_adc_ratio_get</a> (<a class="el" href="structrd__sensor__data__t.html">rd_sensor_data_t</a> *const data)</td></tr>
<tr class="memdesc:ga7c38e9b12e5ee0b7fd12631dd534512f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Populate data with latest ratiometric value.  <a href="#ga7c38e9b12e5ee0b7fd12631dd534512f">More...</a><br/></td></tr>
<tr class="separator:ga7c38e9b12e5ee0b7fd12631dd534512f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6887c417a16ff15eef05aae3321d7630"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__tasks.html#ga6887c417a16ff15eef05aae3321d7630">rt_adc_vdd_prepare</a> (<a class="el" href="structrd__sensor__configuration__t.html">rd_sensor_configuration_t</a> *const vdd_adc_configuration)</td></tr>
<tr class="memdesc:ga6887c417a16ff15eef05aae3321d7630"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare for sampling VDD.  <a href="#ga6887c417a16ff15eef05aae3321d7630">More...</a><br/></td></tr>
<tr class="separator:ga6887c417a16ff15eef05aae3321d7630"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf7fb8227fe40fd495817473ed72a2158"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__tasks.html#gaf7fb8227fe40fd495817473ed72a2158">rt_adc_vdd_sample</a> (void)</td></tr>
<tr class="memdesc:gaf7fb8227fe40fd495817473ed72a2158"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sample VDD.  <a href="#gaf7fb8227fe40fd495817473ed72a2158">More...</a><br/></td></tr>
<tr class="separator:gaf7fb8227fe40fd495817473ed72a2158"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1850e8f80aec17a86aea4f75ba71f990"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__adc__tasks.html#ga1850e8f80aec17a86aea4f75ba71f990">rt_adc_vdd_get</a> (float *const vdd)</td></tr>
<tr class="memdesc:ga1850e8f80aec17a86aea4f75ba71f990"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get VDD.  <a href="#ga1850e8f80aec17a86aea4f75ba71f990">More...</a><br/></td></tr>
<tr class="separator:ga1850e8f80aec17a86aea4f75ba71f990"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Internal Analog-to-digital converter control. </p>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="ga5439776452b55b1c2fe7c86228513f6c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__adc__tasks.html#ga5439776452b55b1c2fe7c86228513f6c">rt_adc_mode_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="gga5439776452b55b1c2fe7c86228513f6cab7e95ded810bd44cd862c100fddacd5d"></a>RATIOMETRIC</em>&#160;</td><td class="fielddoc">
<p>ADC compares value to VDD. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="gga5439776452b55b1c2fe7c86228513f6cac45fae60f994b1b3d5dd2556265f3415"></a>ABSOLUTE</em>&#160;</td><td class="fielddoc">
<p>ADC measures absolute voltage in volts. </p>
</td></tr>
</table>

<p>Definition at line <a class="el" href="ruuvi__task__adc_8h_source.html#l00058">58</a> of file <a class="el" href="ruuvi__task__adc_8h_source.html">ruuvi_task_adc.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga220cd03e1cb4d655caf244d645fe24cb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> rt_adc_configure_se </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrd__sensor__configuration__t.html">rd_sensor_configuration_t</a> *const&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__adc__tasks.html#ga5439776452b55b1c2fe7c86228513f6c">rt_adc_mode_t</a>&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure ADC before sampling. </p>
<p>This function readies the ADC for sampling. Configuring the ADC may take some time (&lt; 1 ms) while actual sample must be as fast as possible to catch transients.</p>
<p><b>Note:</b> ADC should be configured to sleep or continuous mode. To take a single sample, call <a class="el" href="group__adc__tasks.html#ga74753d7100835ef308174c74ee6ce7bc">rt_adc_sample</a> after configuration. Configuring ADC into single sample mode is equivalent to calling <a class="el" href="group__adc__tasks.html#ga74753d7100835ef308174c74ee6ce7bc">rt_adc_sample</a> and configuring ADC into sleep immediately.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">config</td><td>Configuration of ADC. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">handle</td><td>Handle to ADC, i.e. ADC pin. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mode</td><td>sampling mode, <a class="el" href="group__adc__tasks.html#ga5439776452b55b1c2fe7c86228513f6c">rt_adc_mode_t</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RD_SUCCESS</td><td>on success. </td></tr>
    <tr><td class="paramname">RD_ERROR_INVALID_STATE</td><td>if ADC is not initialized or if it is already configured. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga294f05381ed2e2b12015e9f6dd1581b6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> rt_adc_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reserve ADC. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RD_SUCCESS</td><td>on success. </td></tr>
    <tr><td class="paramname">RD_ERROR_INVALID_STATE</td><td>if ADC is already initialized. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga9bef543f5bd481100310cc8e4332ac94"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rt_adc_is_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if ADC is initialized. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>if ADC is initialized. </td></tr>
    <tr><td class="paramname">false</td><td>if ADC is not initialized. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga7c38e9b12e5ee0b7fd12631dd534512f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> rt_adc_ratio_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrd__sensor__data__t.html">rd_sensor_data_t</a> *const&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Populate data with latest ratiometric value. </p>
<p>The data is ratio between 0.0 (gnd) and 1.0 (VDD). However the implementation is allowed to return negative values and values higher than 1.0 if the real voltage is beyond the supply rails or if differential sample is negative.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Data which has a field for ratiometric ADC value </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RD_SUCCESS</td><td>on success </td></tr>
    <tr><td class="paramname">RD_ERROR_INVALID_STATE</td><td>if ADC is not initialized or configured. </td></tr>
    <tr><td class="paramname">error</td><td>code from stack on error. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga74753d7100835ef308174c74ee6ce7bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> rt_adc_sample </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Take a new sample on ADC configured in single-shot/sleep mode. </p>
<p>If this function returns RD_SUCCESS new sample can be immediately read with rt_adc_voltage_get or rt_adc_ratio_get</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RD_SUCCESS</td><td>Sampling was successful </td></tr>
    <tr><td class="paramname">RD_ERROR_INVALID_STATE</td><td>ADC is not initialized or configured </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga6e2446360fe3828f59496329595e847c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> rt_adc_uninit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Uninitialize ADC to release it for other users. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RD_SUCCESS</td><td>on success. </td></tr>
    <tr><td class="paramname">RD_ERROR_FATAL</td><td>if ADC lock can't be released. Reboot. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga1850e8f80aec17a86aea4f75ba71f990"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> rt_adc_vdd_get </td>
          <td>(</td>
          <td class="paramtype">float *const&#160;</td>
          <td class="paramname"><em>vdd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get VDD. </p>
<p>This function should be called any time after <a class="el" href="group__adc__tasks.html#gaf7fb8227fe40fd495817473ed72a2158">rt_adc_vdd_sample</a>. The value returned will remain fixed until next call to <a class="el" href="group__adc__tasks.html#gaf7fb8227fe40fd495817473ed72a2158">rt_adc_vdd_sample</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">vdd</td><td>VDD voltage in volts. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RD_SUCCESS</td><td>on success </td></tr>
    <tr><td class="paramname">RD_ERROR_INVALID_STATE</td><td>if rt_adc_vdd_sample wasn't called. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga6887c417a16ff15eef05aae3321d7630"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> rt_adc_vdd_prepare </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrd__sensor__configuration__t.html">rd_sensor_configuration_t</a> *const&#160;</td>
          <td class="paramname"><em>vdd_adc_configuration</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepare for sampling VDD. </p>
<p>This function should be called before entering energy intensive activity, such as using radio to transmit data. After calling this function ADC is primed for measuring the voltage droop of battery.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RD_SUCCESS</td><td>on success </td></tr>
    <tr><td class="paramname">RD_ERROR_BUSY</td><td>if ADC cannot be reserved </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gaf7fb8227fe40fd495817473ed72a2158"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> rt_adc_vdd_sample </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sample VDD. </p>
<p>This function should be called as soon as possible after energy intensive activity. After a successful call value returned by <a class="el" href="group__adc__tasks.html#ga1850e8f80aec17a86aea4f75ba71f990">rt_adc_vdd_get</a> is updated and ADC is released.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RD_SUCCESS</td><td>on success </td></tr>
    <tr><td class="paramname">RD_ERROR_INVALID_STATE</td><td>if rt_adc_vdd_prepare wasn't called. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gabe0bcf05f3e017d0f54e7cf0cb0afec7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> rt_adc_voltage_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrd__sensor__data__t.html">rd_sensor_data_t</a> *const&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Populate data with latest sample. </p>
<p>The data is absolute voltage relative to device ground.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Data which has a field for absolute ADC value </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">RD_SUCCESS</td><td>on success </td></tr>
    <tr><td class="paramname">RD_ERROR_INVALID_STATE</td><td>if ADC is not initialized or configured. </td></tr>
    <tr><td class="paramname">error</td><td>code from stack on error. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
