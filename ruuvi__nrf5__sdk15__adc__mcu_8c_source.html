<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>ruuvi.drivers.c: src/nrf5_sdk15_platform/adc/ruuvi_nrf5_sdk15_adc_mcu.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ruuvi.drivers.c
   &#160;<span id="projectnumber">0.1.3</span>
   </div>
   <div id="projectbrief">Drivers for external sensors and peripherals on embedded systems.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ruuvi__nrf5__sdk15__adc__mcu_8c_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ruuvi_nrf5_sdk15_adc_mcu.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="ruuvi__nrf5__sdk15__adc__mcu_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ruuvi__driver__enabled__modules_8h.html">ruuvi_driver_enabled_modules.h</a>&quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#if RUUVI_NRF5_SDK15_NRF52832_ADC_ENABLED</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#include &quot;<a class="code" href="ruuvi__driver__error_8h.html">ruuvi_driver_error.h</a>&quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ruuvi__driver__sensor_8h.html">ruuvi_driver_sensor.h</a>&quot;</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ruuvi__nrf5__sdk15__error_8h.html">ruuvi_nrf5_sdk15_error.h</a>&quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ruuvi__interface__adc__mcu_8h.html">ruuvi_interface_adc_mcu.h</a>&quot;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;nrf_drv_saadc.h&quot;</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#define RUUVI_PLATFORM_ADC_NRF52832_DEFAULT_RESOLUTION 10</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#define ADC_REF_VOLTAGE_IN_VOLTS  0.600f  // Reference voltage (in milli volts) used by ADC while doing conversion.</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define ADC_PRE_SCALING_COMPENSATION 6.0f    // The ADC is configured to use channel with prescaling as input. And hence the result of conversion is to be multiplied by prescaling to get the actual value of the voltage.</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">// Macro for checking &quot;ignored&quot; parameters NO_CHANGE, MIN, MAX, DEFAULT</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#define RETURN_SUCCESS_ON_VALID(param) do {\</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">            if(RD_SENSOR_CFG_DEFAULT   == param ||\</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">               RD_SENSOR_CFG_MIN       == param ||\</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">               RD_SENSOR_CFG_MAX       == param ||\</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">               RD_SENSOR_CFG_NO_CHANGE == param   \</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">             ) return RD_SUCCESS;\</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">           } while(0)</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">// Macro for checking that sensor is in sleep mode before configuration</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#define VERIFY_SENSOR_SLEEPS() do { \</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">          uint8_t MACRO_MODE = 0; \</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">          ri_adc_mcu_mode_get(&amp;MACRO_MODE); \</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">          if(RD_SENSOR_CFG_SLEEP != MACRO_MODE) { return RD_ERROR_INVALID_STATE; } \</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">          } while(0)</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> autorefresh  =</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keyword">false</span>;        <span class="comment">// Flag to keep track if we should update the adc on data read.</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> adc_is_init  =</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keyword">false</span>;        <span class="comment">// Flag to keep track if ADC itself is initialized</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="keyword">static</span> uint8_t adc_channel;              <span class="comment">// Channel of ADC</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="keyword">static</span> nrf_saadc_value_t adc_buf;        <span class="comment">// Buffer used for storing ADC value.</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="keyword">static</span> <span class="keywordtype">float</span> adc_volts;                  <span class="comment">// Value of last sample in volts.</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="keyword">static</span> uint64_t adc_tsample;             <span class="comment">// Time when sample was taken</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="keyword">static</span> nrf_drv_saadc_config_t adc_config =</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    NRF_DRV_SAADC_DEFAULT_CONFIG; <span class="comment">// Structure for ADC configuration</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> m_adc_name[] = <span class="stringliteral">&quot;nRF5ADC&quot;</span>; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="keyword">static</span> <span class="keywordtype">float</span> raw_adc_to_volts (nrf_saadc_value_t adc)</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;{</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="comment">// Get ADC max value into counts</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    uint8_t <a class="code" href="ruuvi__interface__lis2dh12_8c.html#a1ce9f7d5c0319733886e4ad15273c457">resolution</a>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <a class="code" href="group___a_d_c.html#gaa79039867dd9a1c66cdaed728b57cef4">ri_adc_mcu_resolution_get</a> (&amp;resolution);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    uint16_t counts = 1 &lt;&lt; <a class="code" href="ruuvi__interface__lis2dh12_8c.html#a1ce9f7d5c0319733886e4ad15273c457">resolution</a>;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">return</span> (ADC_REF_VOLTAGE_IN_VOLTS * ( (<span class="keywordtype">float</span>) adc / (<span class="keywordtype">float</span>) counts) *</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            ADC_PRE_SCALING_COMPENSATION);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;}</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> nrf52832_adc_sample (<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;{</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    nrf_drv_saadc_sample_convert (1, &amp;adc_buf);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    adc_tsample = <a class="code" href="group___sensor.html#gae7305d498d150e2149e14001ff71292d">rd_sensor_timestamp_get</a>();</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    adc_volts = raw_adc_to_volts (adc_buf);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;}</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> saadc_event_handler (nrf_drv_saadc_evt_t <span class="keyword">const</span> * p_evt)</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;{</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">if</span> (p_evt-&gt;type == NRF_DRV_SAADC_EVT_DONE)</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;}</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">// Converts Ruuvi ADC channel to nRF adc channel</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="keyword">static</span> nrf_saadc_input_t ruuvi_to_nrf_adc_channel (<a class="code" href="group___a_d_c.html#gaad0b4578e692ab4c5dd69f6cbbb918ba">ri_adc_channel_t</a> channel)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;{</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">switch</span> (channel)</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group___a_d_c.html#ggaad0b4578e692ab4c5dd69f6cbbb918baa56337981b53de4bb821ff217882f49c0">RI_ADC_AIN0</a>:</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <span class="keywordflow">return</span> NRF_SAADC_INPUT_AIN0;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group___a_d_c.html#ggaad0b4578e692ab4c5dd69f6cbbb918baa7234b4046c9e2fdc3107f1f7d8f7089c">RI_ADC_AIN1</a>:</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="keywordflow">return</span> NRF_SAADC_INPUT_AIN1;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group___a_d_c.html#ggaad0b4578e692ab4c5dd69f6cbbb918baa97d4978d9536976d71e3cb8a35d67412">RI_ADC_AIN2</a>:</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            <span class="keywordflow">return</span> NRF_SAADC_INPUT_AIN2;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group___a_d_c.html#ggaad0b4578e692ab4c5dd69f6cbbb918baa7429bb356650276a582bbc6b23c0fdad">RI_ADC_AIN3</a>:</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            <span class="keywordflow">return</span> NRF_SAADC_INPUT_AIN3;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group___a_d_c.html#ggaad0b4578e692ab4c5dd69f6cbbb918baa42a773039e6d2ed0b52ea906a99e3e9c">RI_ADC_AIN4</a>:</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            <span class="keywordflow">return</span> NRF_SAADC_INPUT_AIN4;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group___a_d_c.html#ggaad0b4578e692ab4c5dd69f6cbbb918baacf86d4df4217b7d0cb6bf47b7fdd0ce5">RI_ADC_AIN5</a>:</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            <span class="keywordflow">return</span> NRF_SAADC_INPUT_AIN5;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group___a_d_c.html#ggaad0b4578e692ab4c5dd69f6cbbb918baa4b2eb0321a91943a1fa99dcbf2302927">RI_ADC_AIN6</a>:</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            <span class="keywordflow">return</span> NRF_SAADC_INPUT_AIN6;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group___a_d_c.html#ggaad0b4578e692ab4c5dd69f6cbbb918baad06af27aa4aec28780bc71c790a63a43">RI_ADC_AIN7</a>:</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            <span class="keywordflow">return</span> NRF_SAADC_INPUT_AIN7;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group___a_d_c.html#ggaad0b4578e692ab4c5dd69f6cbbb918baa7f05a4c31adcd9efb8b71c91aab6cf50">RI_ADC_AINVDD</a>:</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            <span class="keywordflow">return</span> NRF_SAADC_INPUT_VDD;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            <span class="keywordflow">return</span> NRF_SAADC_INPUT_DISABLED;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    }</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;}</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">// Converts ruuvi ADC resolution to nRF SAADC resolution</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="keyword">static</span> nrf_saadc_resolution_t ruuvi_to_nrf_resolution (<span class="keyword">const</span> uint8_t resolution)</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;{</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordflow">switch</span> (resolution)</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group___sensor.html#gac4ac0c3d9e1d34302e7ccbcb4ccd8d1b">RD_SENSOR_CFG_MIN</a>:</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordflow">case</span> 8:</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <span class="keywordflow">return</span> NRF_SAADC_RESOLUTION_8BIT;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="keywordflow">case</span> 10:</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            <span class="keywordflow">return</span> NRF_SAADC_RESOLUTION_10BIT;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordflow">case</span> 12:</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <span class="keywordflow">return</span> NRF_SAADC_RESOLUTION_12BIT;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="group___sensor.html#ga27d1f7122c8541124336b10d330bb18a">RD_SENSOR_CFG_MAX</a>:</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <span class="keywordflow">case</span> 14:</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            <span class="keywordflow">return</span> NRF_SAADC_RESOLUTION_14BIT;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <span class="comment">// we can&#39;t return &quot;invalid&quot;, return 10 as default instead.</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            <span class="keywordflow">return</span> NRF_SAADC_RESOLUTION_10BIT;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;}</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">// Converts nRF SAADC resolution to ruuvi ADC resolution</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="keyword">static</span> uint8_t nrf_to_ruuvi_resolution (<span class="keyword">const</span> nrf_saadc_resolution_t resolution)</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;{</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordflow">switch</span> (resolution)</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <span class="keywordflow">case</span> NRF_SAADC_RESOLUTION_8BIT:</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            <span class="keywordflow">return</span> 8;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="keywordflow">case</span> NRF_SAADC_RESOLUTION_10BIT:</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            <span class="keywordflow">return</span> 10;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <span class="keywordflow">case</span> NRF_SAADC_RESOLUTION_12BIT:</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            <span class="keywordflow">return</span> 12;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keywordflow">case</span> NRF_SAADC_RESOLUTION_14BIT:</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <span class="keywordflow">return</span> 14;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            <span class="keywordflow">return</span> RUUVI_PLATFORM_ADC_NRF52832_DEFAULT_RESOLUTION;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    }</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;}</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">// Uninitializes and reinitializes ADC to apply new configuration</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="keyword">static</span> <a class="code" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> reinit_adc (<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;{</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    ret_code_t err_code = NRF_SUCCESS;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    nrf_drv_saadc_uninit();</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    err_code |= nrf_drv_saadc_init (&amp;adc_config, saadc_event_handler);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    adc_volts = <a class="code" href="group___error.html#gaa4410afd73d0413bf194b93adcf15286">RD_FLOAT_INVALID</a>;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    adc_tsample = <a class="code" href="group___error.html#gae0e5361071e84357dbc63011c816a6d8">RD_UINT64_INVALID</a>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    autorefresh = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group___error.html#ga50258a95c09532fbf52228f2232610e9">ruuvi_nrf5_sdk15_to_ruuvi_error</a> (err_code);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;}</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">// Convert UINT8_T to nRF oversampling</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="keyword">static</span> nrf_saadc_oversample_t uint_to_nrf_os (uint8_t * <span class="keyword">const</span> parameter)</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;{</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    nrf_saadc_oversample_t oversample = NRF_SAADC_OVERSAMPLE_DISABLED;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">if</span> (2 &gt;= *parameter)</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        oversample = NRF_SAADC_OVERSAMPLE_2X;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        *parameter = 2;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (4 &gt;= *parameter)</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        oversample = NRF_SAADC_OVERSAMPLE_4X;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        *parameter = 4;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (8 &gt;= *parameter)</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        oversample = NRF_SAADC_OVERSAMPLE_8X;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        *parameter = 8;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    }</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (16 &gt;= *parameter)</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        oversample = NRF_SAADC_OVERSAMPLE_16X;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        *parameter = 16;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (32 &gt;= *parameter)</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        oversample = NRF_SAADC_OVERSAMPLE_32X;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        *parameter = 32;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    }</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (64 &gt;= *parameter)</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        oversample = NRF_SAADC_OVERSAMPLE_64X;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        *parameter = 64;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (128 &gt;= *parameter)</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        oversample = NRF_SAADC_OVERSAMPLE_128X;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        *parameter = 128;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">return</span> oversample;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;}</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<a class="code" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> <a class="code" href="group___a_d_c.html#gaba7ad9b945c496c6b86e1bae9f602321">ri_adc_mcu_init</a> (<a class="code" href="structrd__sensor__t.html">rd_sensor_t</a> * adc_sensor,</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                             <a class="code" href="group___sensor.html#gadab766cde8260b73a0822f6ee0346775">rd_bus_t</a> bus, uint8_t <a class="code" href="ruuvi__interface__lis2dh12_8c.html#a1699094a55a0394ff884346e034df54c">handle</a>)</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;{</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">if</span> (NULL == adc_sensor) { <span class="keywordflow">return</span> <a class="code" href="group___error.html#ga223073973d9bc6407b7f9cc42a8d8fca">RD_ERROR_NULL</a>; }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group___sensor.html#ggadab766cde8260b73a0822f6ee0346775a430e754bfe00e6ed5796e8ba79910ba9">RD_BUS_NONE</a> != bus) { <span class="keywordflow">return</span> <a class="code" href="group___error.html#gaa610810ee301b53ad1f292898e5b5564">RD_ERROR_NOT_SUPPORTED</a>; }</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="comment">// Support only one instance.</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">if</span> (adc_is_init) { <span class="keywordflow">return</span> <a class="code" href="group___error.html#gaeb4256263dc1a969bd682bb967e6335b">RD_ERROR_INVALID_STATE</a>; }</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="comment">// Initialize ADC structure</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <a class="code" href="group___sensor.html#ga4143a86b19f3bd658a355a68390cc230">rd_sensor_initialize</a> (adc_sensor);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    nrf_drv_saadc_config_t adc_default = NRF_DRV_SAADC_DEFAULT_CONFIG;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    memcpy (&amp;adc_config, &amp;adc_default, <span class="keyword">sizeof</span> (adc_config));</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    ret_code_t err_code = nrf_drv_saadc_init (&amp;adc_config, saadc_event_handler);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">if</span> (NRF_SUCCESS == err_code) { adc_is_init = <span class="keyword">true</span>; }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="comment">// Initialize given channel. Only one ADC channel is supported at a time</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    nrf_saadc_channel_config_t ch_config = NRF_DRV_SAADC_DEFAULT_CHANNEL_CONFIG_SE (</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            ruuvi_to_nrf_adc_channel (handle));</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    ch_config.gain =  NRF_SAADC_GAIN1_6;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    nrf_saadc_channel_init (0, &amp;ch_config);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    adc_channel = <a class="code" href="ruuvi__interface__lis2dh12_8c.html#a1699094a55a0394ff884346e034df54c">handle</a>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="comment">// Setup function pointers</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    adc_sensor-&gt;<a class="code" href="structrd__sensor__t.html#aca49b5fc57cc015c94ec0c7a2d6e0424">init</a>              = <a class="code" href="group___a_d_c.html#gaba7ad9b945c496c6b86e1bae9f602321">ri_adc_mcu_init</a>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    adc_sensor-&gt;<a class="code" href="structrd__sensor__t.html#a547b8fa075f87175a5add0d871a65398">uninit</a>            = <a class="code" href="group___a_d_c.html#gab8b7ccc9a1cd3487dadb6e10dd026a9c">ri_adc_mcu_uninit</a>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    adc_sensor-&gt;<a class="code" href="structrd__sensor__t.html#abfc4863a54244a44728c51f4e707cd15">samplerate_set</a>    = <a class="code" href="group___a_d_c.html#ga8c3addcedf46e2659dd8f1c2287f5408">ri_adc_mcu_samplerate_set</a>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    adc_sensor-&gt;<a class="code" href="structrd__sensor__t.html#a3203f1d2710adc5c1671df693154a979">samplerate_get</a>    = <a class="code" href="group___a_d_c.html#gabc2d2a9d6b5fe06a8616c6116d7872bd">ri_adc_mcu_samplerate_get</a>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    adc_sensor-&gt;<a class="code" href="structrd__sensor__t.html#aef26a7af582572cb21c286ea07b1c9d7">resolution_set</a>    = <a class="code" href="group___a_d_c.html#gaa4cbdb245fa3e7e454c4cde50f42e82c">ri_adc_mcu_resolution_set</a>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    adc_sensor-&gt;<a class="code" href="structrd__sensor__t.html#a47a9475a2d1830a68997c1e1aa2623bd">resolution_get</a>    = <a class="code" href="group___a_d_c.html#gaa79039867dd9a1c66cdaed728b57cef4">ri_adc_mcu_resolution_get</a>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    adc_sensor-&gt;<a class="code" href="structrd__sensor__t.html#ad657351f3ff1b0603e267670e0de2cb0">scale_set</a>         = <a class="code" href="group___a_d_c.html#gacf768af2ab535a95f8ba2781c1cdbd0b">ri_adc_mcu_scale_set</a>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    adc_sensor-&gt;<a class="code" href="structrd__sensor__t.html#aefa3f417f23fcad7f54033d83548f8b5">scale_get</a>         = <a class="code" href="group___a_d_c.html#ga8068a4b16310295914c5561667626657">ri_adc_mcu_scale_get</a>;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    adc_sensor-&gt;<a class="code" href="structrd__sensor__t.html#a8674da38bab8839ac977c52192e55400">dsp_set</a>           = <a class="code" href="group___a_d_c.html#ga577e037329f2cc6036e9482993a8b6d8">ri_adc_mcu_dsp_set</a>;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    adc_sensor-&gt;<a class="code" href="structrd__sensor__t.html#a732fd9a125e1b78b3e36e29b602e99cc">dsp_get</a>           = <a class="code" href="group___a_d_c.html#ga82938817973a1e8f952b4a45dbac96b0">ri_adc_mcu_dsp_get</a>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    adc_sensor-&gt;<a class="code" href="structrd__sensor__t.html#a8e676900bd180defb6b537c9b3ef6ab2">mode_set</a>          = <a class="code" href="group___a_d_c.html#ga49fe211e56621c31bb4dc96148656599">ri_adc_mcu_mode_set</a>;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    adc_sensor-&gt;<a class="code" href="structrd__sensor__t.html#aac9ba35b03ec68d587dadb1e9a549d62">mode_get</a>          = <a class="code" href="group___a_d_c.html#gab716b999bfad6fd36d4784c9ffd6faaf">ri_adc_mcu_mode_get</a>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    adc_sensor-&gt;<a class="code" href="structrd__sensor__t.html#a01867146e57cb448cc9a4f3f35adc1d1">data_get</a>          = <a class="code" href="group___a_d_c.html#ga6c65cda5596e94b6b874a353b84a650a">ri_adc_mcu_data_get</a>;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    adc_sensor-&gt;<a class="code" href="structrd__sensor__t.html#a2c973a62c9f5735465239e7d0273e53f">configuration_set</a> = <a class="code" href="group___sensor.html#gaaf4a077bf0a441ca9bc482cf454f6503">rd_sensor_configuration_set</a>;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    adc_sensor-&gt;<a class="code" href="structrd__sensor__t.html#a610c7fd98b1cd6e2f966f652ea060ae1">configuration_get</a> = <a class="code" href="group___sensor.html#ga3f7af9b82cd8b556694f301d051ea8c3">rd_sensor_configuration_get</a>;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    adc_sensor-&gt;<a class="code" href="structrd__sensor__t.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>              = m_adc_name;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    adc_sensor-&gt;<a class="code" href="structrd__sensor__t.html#a7a9ac39c30235d0989193fadf5a97a4a">provides</a>.<a class="code" href="unionrd__sensor__data__fields__t.html#aa6b36985861a38d2a44f73ca08de8a7f">datas</a>.<a class="code" href="structrd__sensor__data__bitfield__t.html#a65955763a053b1b3aa3c630e69d65f35">voltage_v</a> = 1;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    adc_volts = <a class="code" href="group___error.html#gaa4410afd73d0413bf194b93adcf15286">RD_FLOAT_INVALID</a>;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    adc_tsample = <a class="code" href="group___error.html#gae0e5361071e84357dbc63011c816a6d8">RD_UINT64_INVALID</a>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    autorefresh = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group___error.html#ga50258a95c09532fbf52228f2232610e9">ruuvi_nrf5_sdk15_to_ruuvi_error</a> (err_code);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;}</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<a class="code" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> <a class="code" href="group___a_d_c.html#gab8b7ccc9a1cd3487dadb6e10dd026a9c">ri_adc_mcu_uninit</a> (<a class="code" href="structrd__sensor__t.html">rd_sensor_t</a> * adc_sensor,</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                               <a class="code" href="group___sensor.html#gadab766cde8260b73a0822f6ee0346775">rd_bus_t</a> bus, uint8_t handle)</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;{</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">if</span> (NULL == adc_sensor) { <span class="keywordflow">return</span> <a class="code" href="group___error.html#ga223073973d9bc6407b7f9cc42a8d8fca">RD_ERROR_NULL</a>; }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <a class="code" href="group___sensor.html#ga28abfb1e3e8aba187af41ca748b0421f">rd_sensor_uninitialize</a> (adc_sensor);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    nrf_drv_saadc_uninit();</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    adc_is_init = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    autorefresh = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    adc_tsample = <a class="code" href="group___error.html#gae0e5361071e84357dbc63011c816a6d8">RD_UINT64_INVALID</a>;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    adc_volts = <a class="code" href="group___error.html#gaa4410afd73d0413bf194b93adcf15286">RD_FLOAT_INVALID</a>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group___error.html#gaa76220bc977ea62edf556efd7729eaf2">RD_SUCCESS</a>;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;}</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment">// Continuous sampling is not supported (although we could use timer and PPI to implement it), mark pointed value as not supported even if parameter is one of no-changes</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<a class="code" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> <a class="code" href="group___a_d_c.html#ga8c3addcedf46e2659dd8f1c2287f5408">ri_adc_mcu_samplerate_set</a> (uint8_t * <a class="code" href="ruuvi__interface__lis2dh12_8c.html#ab7fcf2e5376c0f80a2f51197a4bde61c">samplerate</a>)</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;{</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keywordflow">if</span> (NULL == samplerate) { <span class="keywordflow">return</span> <a class="code" href="group___error.html#ga223073973d9bc6407b7f9cc42a8d8fca">RD_ERROR_NULL</a>; }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <a class="code" href="group___l_i_s2_d_h12.html#ga97355e96c09fc9896da2a8dd1d95c9b4">VERIFY_SENSOR_SLEEPS</a>();</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    uint8_t original = *<a class="code" href="ruuvi__interface__lis2dh12_8c.html#ab7fcf2e5376c0f80a2f51197a4bde61c">samplerate</a>;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    *samplerate = <a class="code" href="group___sensor.html#ga0a9b852d5dc3c1309871c398c57cbfae">RD_SENSOR_ERR_NOT_SUPPORTED</a>;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <a class="code" href="group___b_m_e280.html#ga59ad04a27678ee7b16070e43227e970b">RETURN_SUCCESS_ON_VALID</a> (original);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group___error.html#gaa610810ee301b53ad1f292898e5b5564">RD_ERROR_NOT_SUPPORTED</a>;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;}</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<a class="code" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> <a class="code" href="group___a_d_c.html#gabc2d2a9d6b5fe06a8616c6116d7872bd">ri_adc_mcu_samplerate_get</a> (uint8_t * samplerate)</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;{</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">if</span> (NULL == samplerate) { <span class="keywordflow">return</span> <a class="code" href="group___error.html#ga223073973d9bc6407b7f9cc42a8d8fca">RD_ERROR_NULL</a>; }</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    *samplerate = <a class="code" href="group___sensor.html#ga0a9b852d5dc3c1309871c398c57cbfae">RD_SENSOR_ERR_NOT_SUPPORTED</a>;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group___error.html#gaa76220bc977ea62edf556efd7729eaf2">RD_SUCCESS</a>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;}</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<a class="code" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> <a class="code" href="group___a_d_c.html#gaa4cbdb245fa3e7e454c4cde50f42e82c">ri_adc_mcu_resolution_set</a> (uint8_t * resolution)</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;{</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordflow">if</span> (NULL == resolution) { <span class="keywordflow">return</span> <a class="code" href="group___error.html#ga223073973d9bc6407b7f9cc42a8d8fca">RD_ERROR_NULL</a>; }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <a class="code" href="group___l_i_s2_d_h12.html#ga97355e96c09fc9896da2a8dd1d95c9b4">VERIFY_SENSOR_SLEEPS</a>();</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group___sensor.html#gad0abf298a0f1a279ef40a83313797274">RD_SENSOR_CFG_NO_CHANGE</a> == *resolution)    { <span class="keywordflow">return</span> <a class="code" href="group___a_d_c.html#gaa79039867dd9a1c66cdaed728b57cef4">ri_adc_mcu_resolution_get</a> (resolution); }</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group___sensor.html#gac4ac0c3d9e1d34302e7ccbcb4ccd8d1b">RD_SENSOR_CFG_MIN</a> == *resolution)</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        *resolution = 8;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        adc_config.resolution = NRF_SAADC_RESOLUTION_8BIT;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group___sensor.html#ga27d1f7122c8541124336b10d330bb18a">RD_SENSOR_CFG_MAX</a> == *resolution)</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        *resolution = 14;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        adc_config.resolution = NRF_SAADC_RESOLUTION_14BIT;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="group___sensor.html#ga27ee843513e0399d8525d85c08b3b19d">RD_SENSOR_CFG_DEFAULT</a> == *resolution)</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    {</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        *resolution = RUUVI_PLATFORM_ADC_NRF52832_DEFAULT_RESOLUTION;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        adc_config.resolution = ruuvi_to_nrf_resolution (*resolution);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (8 &gt;= *resolution)  { adc_config.resolution = NRF_SAADC_RESOLUTION_8BIT;  *resolution = 8; }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (10 &gt;= *resolution) { adc_config.resolution = NRF_SAADC_RESOLUTION_10BIT; *resolution = 10; }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (12 &gt;= *resolution) { adc_config.resolution = NRF_SAADC_RESOLUTION_12BIT; *resolution = 12; }</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (14 &gt;= *resolution) { adc_config.resolution = NRF_SAADC_RESOLUTION_14BIT; *resolution = 14; }</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    {</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        *resolution = <a class="code" href="group___sensor.html#ga0a9b852d5dc3c1309871c398c57cbfae">RD_SENSOR_ERR_NOT_SUPPORTED</a>;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group___error.html#gaa610810ee301b53ad1f292898e5b5564">RD_ERROR_NOT_SUPPORTED</a>;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="comment">// Uninit and reinit adc with new settings.</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordflow">return</span> reinit_adc();</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;}</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<a class="code" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> <a class="code" href="group___a_d_c.html#gaa79039867dd9a1c66cdaed728b57cef4">ri_adc_mcu_resolution_get</a> (uint8_t * resolution)</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;{</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">if</span> (NULL == resolution) { <span class="keywordflow">return</span> <a class="code" href="group___error.html#ga223073973d9bc6407b7f9cc42a8d8fca">RD_ERROR_NULL</a>; }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    *resolution = nrf_to_ruuvi_resolution (adc_config.resolution);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group___error.html#gaa76220bc977ea62edf556efd7729eaf2">RD_SUCCESS</a>;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;}</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">// While scale could be adjustable, we&#39;ll use fixed 3600 mV.</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<a class="code" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> <a class="code" href="group___a_d_c.html#gacf768af2ab535a95f8ba2781c1cdbd0b">ri_adc_mcu_scale_set</a> (uint8_t * <a class="code" href="ruuvi__interface__lis2dh12_8c.html#ae5d83dfa04a0457180fe327ab7895db0">scale</a>)</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;{</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordflow">if</span> (NULL == scale) { <span class="keywordflow">return</span> <a class="code" href="group___error.html#ga223073973d9bc6407b7f9cc42a8d8fca">RD_ERROR_NULL</a>; }</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <a class="code" href="group___l_i_s2_d_h12.html#ga97355e96c09fc9896da2a8dd1d95c9b4">VERIFY_SENSOR_SLEEPS</a>();</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    uint8_t original = *<a class="code" href="ruuvi__interface__lis2dh12_8c.html#ae5d83dfa04a0457180fe327ab7895db0">scale</a>;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="comment">// &quot;At least&quot; 3</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    *scale = 3;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <a class="code" href="group___b_m_e280.html#ga59ad04a27678ee7b16070e43227e970b">RETURN_SUCCESS_ON_VALID</a> (original);</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group___error.html#gaa610810ee301b53ad1f292898e5b5564">RD_ERROR_NOT_SUPPORTED</a>;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;}</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<a class="code" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> <a class="code" href="group___a_d_c.html#ga8068a4b16310295914c5561667626657">ri_adc_mcu_scale_get</a> (uint8_t * scale)</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;{</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordflow">if</span> (NULL == scale) { <span class="keywordflow">return</span> <a class="code" href="group___error.html#ga223073973d9bc6407b7f9cc42a8d8fca">RD_ERROR_NULL</a>; }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="comment">// &quot;At least&quot; 3</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    *scale = 3;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group___error.html#gaa76220bc977ea62edf556efd7729eaf2">RD_SUCCESS</a>;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;}</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">// Return success on DSP_LAST, DSP_OVERSAMPLING and acceptable defaults, not supported otherwise</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<a class="code" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> <a class="code" href="group___a_d_c.html#ga577e037329f2cc6036e9482993a8b6d8">ri_adc_mcu_dsp_set</a> (uint8_t * dsp, uint8_t * parameter)</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;{</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keywordflow">if</span> (NULL == dsp || NULL == parameter) { <span class="keywordflow">return</span> <a class="code" href="group___error.html#ga223073973d9bc6407b7f9cc42a8d8fca">RD_ERROR_NULL</a>; }</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <a class="code" href="group___l_i_s2_d_h12.html#ga97355e96c09fc9896da2a8dd1d95c9b4">VERIFY_SENSOR_SLEEPS</a>();</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="comment">// Store originals</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    uint8_t dsp_original;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    dsp_original       = *dsp;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="comment">// Ge actual values</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <a class="code" href="group___a_d_c.html#ga82938817973a1e8f952b4a45dbac96b0">ri_adc_mcu_dsp_get</a> (dsp, parameter);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="comment">// Set new values if applicable</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group___sensor.html#ga00b1b1101ae61ca5c2c5b62d89c418f6">RD_SENSOR_DSP_LAST</a> == dsp_original ||</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            <a class="code" href="group___sensor.html#ga27ee843513e0399d8525d85c08b3b19d">RD_SENSOR_CFG_DEFAULT</a> == dsp_original)</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    {</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        adc_config.oversample = NRF_SAADC_OVERSAMPLE_DISABLED;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        *parameter = 1;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        *dsp = <a class="code" href="group___sensor.html#ga00b1b1101ae61ca5c2c5b62d89c418f6">RD_SENSOR_DSP_LAST</a>;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        reinit_adc();</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group___error.html#gaa76220bc977ea62edf556efd7729eaf2">RD_SUCCESS</a>;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    }</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment">// 128 is maximum we support</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">if</span> ( (<a class="code" href="group___sensor.html#ga319369cd5bda2a83c6da03b45bca8e71">RD_SENSOR_DSP_OS</a> == dsp_original) &amp;&amp;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            (128 &lt; *parameter))</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        adc_config.oversample = uint_to_nrf_os (parameter);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        reinit_adc();</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group___error.html#gaa76220bc977ea62edf556efd7729eaf2">RD_SUCCESS</a>;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    }</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group___error.html#gaa610810ee301b53ad1f292898e5b5564">RD_ERROR_NOT_SUPPORTED</a>;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;}</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<a class="code" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> <a class="code" href="group___a_d_c.html#ga82938817973a1e8f952b4a45dbac96b0">ri_adc_mcu_dsp_get</a> (uint8_t * dsp, uint8_t * parameter)</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;{</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keywordflow">switch</span> (adc_config.oversample)</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    {</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="keywordflow">case</span> NRF_SAADC_OVERSAMPLE_DISABLED:</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            *dsp = <a class="code" href="group___sensor.html#ga00b1b1101ae61ca5c2c5b62d89c418f6">RD_SENSOR_DSP_LAST</a>;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            *parameter = 1;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="keywordflow">case</span> NRF_SAADC_OVERSAMPLE_2X:</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            *dsp = <a class="code" href="group___sensor.html#ga319369cd5bda2a83c6da03b45bca8e71">RD_SENSOR_DSP_OS</a>;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            *parameter = 2;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="keywordflow">case</span> NRF_SAADC_OVERSAMPLE_4X:</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            *dsp = <a class="code" href="group___sensor.html#ga319369cd5bda2a83c6da03b45bca8e71">RD_SENSOR_DSP_OS</a>;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            *parameter = 4;</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <span class="keywordflow">case</span> NRF_SAADC_OVERSAMPLE_8X:</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            *dsp = <a class="code" href="group___sensor.html#ga319369cd5bda2a83c6da03b45bca8e71">RD_SENSOR_DSP_OS</a>;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            *parameter = 8;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        <span class="keywordflow">case</span> NRF_SAADC_OVERSAMPLE_16X:</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            *dsp = <a class="code" href="group___sensor.html#ga319369cd5bda2a83c6da03b45bca8e71">RD_SENSOR_DSP_OS</a>;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            *parameter = 16;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <span class="keywordflow">case</span> NRF_SAADC_OVERSAMPLE_32X:</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            *dsp = <a class="code" href="group___sensor.html#ga319369cd5bda2a83c6da03b45bca8e71">RD_SENSOR_DSP_OS</a>;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            *parameter = 32;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="keywordflow">case</span> NRF_SAADC_OVERSAMPLE_64X:</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            *dsp = <a class="code" href="group___sensor.html#ga319369cd5bda2a83c6da03b45bca8e71">RD_SENSOR_DSP_OS</a>;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            *parameter = 64;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        <span class="keywordflow">case</span> NRF_SAADC_OVERSAMPLE_128X:</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            *dsp = <a class="code" href="group___sensor.html#ga319369cd5bda2a83c6da03b45bca8e71">RD_SENSOR_DSP_OS</a>;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            *parameter = 128;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group___error.html#gaf057eb4393594adb3e2f3d7ee9bb5ed1">RD_ERROR_INTERNAL</a>;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    }</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group___error.html#gaa76220bc977ea62edf556efd7729eaf2">RD_SUCCESS</a>;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;}</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">// Start single on command, mark autorefresh with continuous</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<a class="code" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> <a class="code" href="group___a_d_c.html#ga49fe211e56621c31bb4dc96148656599">ri_adc_mcu_mode_set</a> (uint8_t * <a class="code" href="ruuvi__interface__lis2dh12_8c.html#a37e90f5e3bd99fac2021fb3a326607d4">mode</a>)</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;{</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">if</span> (NULL == mode) { <span class="keywordflow">return</span> <a class="code" href="group___error.html#ga223073973d9bc6407b7f9cc42a8d8fca">RD_ERROR_NULL</a>; }</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="comment">// Enter sleep by default and by explicit sleep commmand</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group___sensor.html#ga16ac06727f5f9ff7edbd0e3d4e380ee5">RD_SENSOR_CFG_SLEEP</a> == *mode || <a class="code" href="group___sensor.html#ga27ee843513e0399d8525d85c08b3b19d">RD_SENSOR_CFG_DEFAULT</a> == *mode)</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    {</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        autorefresh = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        *mode = <a class="code" href="group___sensor.html#ga16ac06727f5f9ff7edbd0e3d4e380ee5">RD_SENSOR_CFG_SLEEP</a>;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group___error.html#gaa76220bc977ea62edf556efd7729eaf2">RD_SUCCESS</a>;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    }</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group___sensor.html#gaebd21c0bd2498ed9118b7add24890c89">RD_SENSOR_CFG_SINGLE</a> == *mode)</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    {</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        <span class="comment">// Do nothing if sensor is in continuous mode</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        uint8_t current_mode;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <a class="code" href="group___a_d_c.html#gab716b999bfad6fd36d4784c9ffd6faaf">ri_adc_mcu_mode_get</a> (&amp;current_mode);</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="group___sensor.html#gac980226ec5044563ad5eeab770ccd6de">RD_SENSOR_CFG_CONTINUOUS</a> == current_mode)</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;        {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            *mode = <a class="code" href="group___sensor.html#gac980226ec5044563ad5eeab770ccd6de">RD_SENSOR_CFG_CONTINUOUS</a>;</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="group___error.html#gaeb4256263dc1a969bd682bb967e6335b">RD_ERROR_INVALID_STATE</a>;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        }</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <span class="comment">// Enter sleep after measurement</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        autorefresh = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        *mode = <a class="code" href="group___sensor.html#ga16ac06727f5f9ff7edbd0e3d4e380ee5">RD_SENSOR_CFG_SLEEP</a>;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <span class="comment">// Global float is updated by sample</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        nrf52832_adc_sample();</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group___error.html#gaa76220bc977ea62edf556efd7729eaf2">RD_SUCCESS</a>;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    }</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="group___sensor.html#gac980226ec5044563ad5eeab770ccd6de">RD_SENSOR_CFG_CONTINUOUS</a> == *mode)</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    {</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        autorefresh = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="group___error.html#gaa76220bc977ea62edf556efd7729eaf2">RD_SUCCESS</a>;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    }</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group___error.html#ga03d5122e7da115a54aa89f1ba7eca4e8">RD_ERROR_INVALID_PARAM</a>;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;}</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<a class="code" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> <a class="code" href="group___a_d_c.html#gab716b999bfad6fd36d4784c9ffd6faaf">ri_adc_mcu_mode_get</a> (uint8_t * mode)</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;{</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <span class="keywordflow">if</span> (NULL == mode) { <span class="keywordflow">return</span> <a class="code" href="group___error.html#ga223073973d9bc6407b7f9cc42a8d8fca">RD_ERROR_NULL</a>; }</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">if</span> (autorefresh)</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    {</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        *mode = <a class="code" href="group___sensor.html#gac980226ec5044563ad5eeab770ccd6de">RD_SENSOR_CFG_CONTINUOUS</a>;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    }</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordflow">if</span> (!autorefresh)</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        *mode = <a class="code" href="group___sensor.html#ga16ac06727f5f9ff7edbd0e3d4e380ee5">RD_SENSOR_CFG_SLEEP</a>;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    }</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group___error.html#gaa76220bc977ea62edf556efd7729eaf2">RD_SUCCESS</a>;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;}</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<a class="code" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> <a class="code" href="group___a_d_c.html#ga6c65cda5596e94b6b874a353b84a650a">ri_adc_mcu_data_get</a> (<a class="code" href="structrd__sensor__data__t.html">rd_sensor_data_t</a> * <span class="keyword">const</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                                 p_data)</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;{</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keywordflow">if</span> (NULL == p_data) { <span class="keywordflow">return</span> <a class="code" href="group___error.html#ga223073973d9bc6407b7f9cc42a8d8fca">RD_ERROR_NULL</a>; }</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="keywordflow">if</span> (autorefresh) { nrf52832_adc_sample(); }</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    p_data-&gt;<a class="code" href="structrd__sensor__data__t.html#aa8167fff02183d6e41ecfce83a976715">timestamp_ms</a>    = <a class="code" href="group___error.html#gae0e5361071e84357dbc63011c816a6d8">RD_UINT64_INVALID</a>;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="keywordflow">if</span> (!isnan (adc_volts))</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        <a class="code" href="structrd__sensor__data__t.html">rd_sensor_data_t</a> d_adc;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <a class="code" href="unionrd__sensor__data__fields__t.html">rd_sensor_data_fields_t</a> adc_fields = {.<a class="code" href="unionrd__sensor__data__fields__t.html#a4d9e047fe56f3844d6e8ae58eeb2d114">bitfield</a> = 0};</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <span class="keywordtype">float</span> adc_values[1];</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        adc_values[0] = adc_volts;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        adc_fields.<a class="code" href="unionrd__sensor__data__fields__t.html#aa6b36985861a38d2a44f73ca08de8a7f">datas</a>.<a class="code" href="structrd__sensor__data__bitfield__t.html#a65955763a053b1b3aa3c630e69d65f35">voltage_v</a> = 1;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        d_adc.<a class="code" href="structrd__sensor__data__t.html#a57ba9c584cf7756552b7d4370e93395f">data</a> = adc_values;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        d_adc.<a class="code" href="structrd__sensor__data__t.html#ac0c6af74cc94ad9af119a03e6443b865">valid</a>  = adc_fields;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        d_adc.<a class="code" href="structrd__sensor__data__t.html#ad87183c0717974ffaf7a518b6b254c4d">fields</a> = adc_fields;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <a class="code" href="group___sensor.html#gaa01d6154317c23d3a536abe5d56554ce">rd_sensor_data_populate</a> (p_data,</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                                 &amp;d_adc,</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                                 p_data-&gt;<a class="code" href="structrd__sensor__data__t.html#ad87183c0717974ffaf7a518b6b254c4d">fields</a>);</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        p_data-&gt;<a class="code" href="structrd__sensor__data__t.html#aa8167fff02183d6e41ecfce83a976715">timestamp_ms</a> = adc_tsample;</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    }</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="group___error.html#gaa76220bc977ea62edf556efd7729eaf2">RD_SUCCESS</a>;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;}</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="preprocessor">#if 0</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="preprocessor"></span><a class="code" href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a> ri_adc_complex_sample (<span class="keyword">const</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                                   <a class="code" href="structri__adc__sample__t.html">ri_adc_sample_t</a> * <span class="keyword">const</span> sample, ri_adc_data_t * <span class="keyword">const</span> data)</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;{</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keywordflow">if</span> (NULL == data || NULL == sample) { <span class="keywordflow">return</span> <a class="code" href="group___error.html#ga223073973d9bc6407b7f9cc42a8d8fca">RD_ERROR_NULL</a>; }</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">true</span> == adc_is_init) { <span class="keywordflow">return</span> <a class="code" href="group___error.html#gaeb4256263dc1a969bd682bb967e6335b">RD_ERROR_INVALID_STATE</a>; }</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="comment">// Initialize ADC</span></div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    nrf_drv_saadc_config_t adc_default = NRF_DRV_SAADC_DEFAULT_CONFIG;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    memcpy (&amp;adc_config, &amp;adc_default, <span class="keyword">sizeof</span> (adc_config));</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    uint8_t os = sample-&gt;<a class="code" href="structri__adc__sample__t.html#aab975bd013c959d3468176b2ad337cd5">oversamples</a>;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    adc_config.oversample = uint_to_nrf_os (&amp;os);</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    adc_config.resolution = NRF_SAADC_RESOLUTION_14BIT;</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    ret_code_t err_code = nrf_drv_saadc_init (&amp;adc_config, saadc_event_handler);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="comment">// Initialize given channel. Only one ADC channel is supported at a time</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    nrf_saadc_channel_config_t ch_config =</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        \</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        .resistor_p = NRF_SAADC_RESISTOR_DISABLED,                       \</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        .resistor_n = NRF_SAADC_RESISTOR_DISABLED,                       \</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        .gain       = NRF_SAADC_GAIN1_6,                                 \</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        .reference  = NRF_SAADC_REFERENCE_INTERNAL,                      \</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        .acq_time   = NRF_SAADC_ACQTIME_10US,                            \</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        .mode       = (RUUVI_INTERFACE_ADC_AINGND == (sample-&gt;<a class="code" href="structri__adc__sample__t.html#ac1fcaff05d83399369c7e5c498a0a990">negative</a>)) ? NRF_SAADC_MODE_SINGLE_ENDED : NRF_SAADC_MODE_DIFFERENTIAL, \</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        .pin_p      = ruuvi_to_nrf_adc_channel (sample-&gt;<a class="code" href="structri__adc__sample__t.html#a10b801d16dc20356af46c4c4cb1d465e">positive</a>),        \</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        .pin_n      = ruuvi_to_nrf_adc_channel (sample-&gt;<a class="code" href="structri__adc__sample__t.html#ac1fcaff05d83399369c7e5c498a0a990">negative</a>)</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    };</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    nrf_saadc_channel_init (0, &amp;ch_config);</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="keywordflow">return</span> err_code;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;}</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="ttc" id="group___error_html_gaeb4256263dc1a969bd682bb967e6335b"><div class="ttname"><a href="group___error.html#gaeb4256263dc1a969bd682bb967e6335b">RD_ERROR_INVALID_STATE</a></div><div class="ttdeci">#define RD_ERROR_INVALID_STATE</div><div class="ttdoc">Invalid state, operation disallowed in this state. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__error_8h_source.html#l00035">ruuvi_driver_error.h:35</a></div></div>
<div class="ttc" id="group___sensor_html_ggadab766cde8260b73a0822f6ee0346775a430e754bfe00e6ed5796e8ba79910ba9"><div class="ttname"><a href="group___sensor.html#ggadab766cde8260b73a0822f6ee0346775a430e754bfe00e6ed5796e8ba79910ba9">RD_BUS_NONE</a></div><div class="ttdoc">No bus, internal to IC. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00116">ruuvi_driver_sensor.h:116</a></div></div>
<div class="ttc" id="ruuvi__driver__sensor_8h_html"><div class="ttname"><a href="ruuvi__driver__sensor_8h.html">ruuvi_driver_sensor.h</a></div><div class="ttdoc">Ruuvi sensor interface Lifecycle: Beta </div></div>
<div class="ttc" id="structrd__sensor__data__t_html_aa8167fff02183d6e41ecfce83a976715"><div class="ttname"><a href="structrd__sensor__data__t.html#aa8167fff02183d6e41ecfce83a976715">rd_sensor_data_t::timestamp_ms</a></div><div class="ttdeci">uint64_t timestamp_ms</div><div class="ttdoc">Timestamp of the event, rd_sensor_timestamp_get. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00165">ruuvi_driver_sensor.h:165</a></div></div>
<div class="ttc" id="group___a_d_c_html_ggaad0b4578e692ab4c5dd69f6cbbb918baa4b2eb0321a91943a1fa99dcbf2302927"><div class="ttname"><a href="group___a_d_c.html#ggaad0b4578e692ab4c5dd69f6cbbb918baa4b2eb0321a91943a1fa99dcbf2302927">RI_ADC_AIN6</a></div><div class="ttdoc">Channel 7 of ADC. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__interface__adc__mcu_8h_source.html#l00029">ruuvi_interface_adc_mcu.h:29</a></div></div>
<div class="ttc" id="group___sensor_html_ga0a9b852d5dc3c1309871c398c57cbfae"><div class="ttname"><a href="group___sensor.html#ga0a9b852d5dc3c1309871c398c57cbfae">RD_SENSOR_ERR_NOT_SUPPORTED</a></div><div class="ttdeci">#define RD_SENSOR_ERR_NOT_SUPPORTED</div><div class="ttdoc">Error code, given parameter is not supported by sensor. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00076">ruuvi_driver_sensor.h:76</a></div></div>
<div class="ttc" id="structrd__sensor__t_html"><div class="ttname"><a href="structrd__sensor__t.html">rd_sensor_t</a></div><div class="ttdoc">Interface to sensor. Some sensors can implement additional functions. The additional functions are de...</div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00313">ruuvi_driver_sensor.h:313</a></div></div>
<div class="ttc" id="group___error_html_ga50258a95c09532fbf52228f2232610e9"><div class="ttname"><a href="group___error.html#ga50258a95c09532fbf52228f2232610e9">ruuvi_nrf5_sdk15_to_ruuvi_error</a></div><div class="ttdeci">rd_status_t ruuvi_nrf5_sdk15_to_ruuvi_error(const ret_code_t error)</div><div class="ttdoc">convert nrf5 sdk15 error code into Ruuvi error code. </div></div>
<div class="ttc" id="group___l_i_s2_d_h12_html_ga97355e96c09fc9896da2a8dd1d95c9b4"><div class="ttname"><a href="group___l_i_s2_d_h12.html#ga97355e96c09fc9896da2a8dd1d95c9b4">VERIFY_SENSOR_SLEEPS</a></div><div class="ttdeci">#define VERIFY_SENSOR_SLEEPS()</div><div class="ttdoc">Macro for checking that sensor is in sleep mode before configuration. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__interface__lis2dh12_8c_source.html#l00036">ruuvi_interface_lis2dh12.c:36</a></div></div>
<div class="ttc" id="structrd__sensor__t_html_a732fd9a125e1b78b3e36e29b602e99cc"><div class="ttname"><a href="structrd__sensor__t.html#a732fd9a125e1b78b3e36e29b602e99cc">rd_sensor_t::dsp_get</a></div><div class="ttdeci">rd_sensor_dsp_fp dsp_get</div><div class="ttdoc">rd_sensor_dsp_fp </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00342">ruuvi_driver_sensor.h:342</a></div></div>
<div class="ttc" id="group___a_d_c_html_ggaad0b4578e692ab4c5dd69f6cbbb918baacf86d4df4217b7d0cb6bf47b7fdd0ce5"><div class="ttname"><a href="group___a_d_c.html#ggaad0b4578e692ab4c5dd69f6cbbb918baacf86d4df4217b7d0cb6bf47b7fdd0ce5">RI_ADC_AIN5</a></div><div class="ttdoc">Channel 6 of ADC. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__interface__adc__mcu_8h_source.html#l00028">ruuvi_interface_adc_mcu.h:28</a></div></div>
<div class="ttc" id="ruuvi__interface__lis2dh12_8c_html_a1699094a55a0394ff884346e034df54c"><div class="ttname"><a href="ruuvi__interface__lis2dh12_8c.html#a1699094a55a0394ff884346e034df54c">handle</a></div><div class="ttdeci">uint8_t handle</div><div class="ttdoc">Device handle, SPI GPIO pin or I2C address. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__interface__lis2dh12_8c_source.html#l00066">ruuvi_interface_lis2dh12.c:66</a></div></div>
<div class="ttc" id="structrd__sensor__t_html_abfc4863a54244a44728c51f4e707cd15"><div class="ttname"><a href="structrd__sensor__t.html#abfc4863a54244a44728c51f4e707cd15">rd_sensor_t::samplerate_set</a></div><div class="ttdeci">rd_sensor_setup_fp samplerate_set</div><div class="ttdoc">rd_sensor_setup_fp </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00324">ruuvi_driver_sensor.h:324</a></div></div>
<div class="ttc" id="ruuvi__interface__lis2dh12_8c_html_ab7fcf2e5376c0f80a2f51197a4bde61c"><div class="ttname"><a href="ruuvi__interface__lis2dh12_8c.html#ab7fcf2e5376c0f80a2f51197a4bde61c">samplerate</a></div><div class="ttdeci">lis2dh12_odr_t samplerate</div><div class="ttdoc">Sample rate, 1 ... 200, or custom values for higher. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__interface__lis2dh12_8c_source.html#l00063">ruuvi_interface_lis2dh12.c:63</a></div></div>
<div class="ttc" id="structrd__sensor__data__t_html_ac0c6af74cc94ad9af119a03e6443b865"><div class="ttname"><a href="structrd__sensor__data__t.html#ac0c6af74cc94ad9af119a03e6443b865">rd_sensor_data_t::valid</a></div><div class="ttdeci">rd_sensor_data_fields_t valid</div><div class="ttdoc">Listing of valid data in this sample. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00168">ruuvi_driver_sensor.h:168</a></div></div>
<div class="ttc" id="group___sensor_html_ga00b1b1101ae61ca5c2c5b62d89c418f6"><div class="ttname"><a href="group___sensor.html#ga00b1b1101ae61ca5c2c5b62d89c418f6">RD_SENSOR_DSP_LAST</a></div><div class="ttdeci">#define RD_SENSOR_DSP_LAST</div><div class="ttdoc">Return last value from sensor. Parameter: No effect. Use default. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00085">ruuvi_driver_sensor.h:85</a></div></div>
<div class="ttc" id="group___error_html_gaa76220bc977ea62edf556efd7729eaf2"><div class="ttname"><a href="group___error.html#gaa76220bc977ea62edf556efd7729eaf2">RD_SUCCESS</a></div><div class="ttdeci">#define RD_SUCCESS</div><div class="ttdoc">Internal Error. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__error_8h_source.html#l00029">ruuvi_driver_error.h:29</a></div></div>
<div class="ttc" id="group___a_d_c_html_gabc2d2a9d6b5fe06a8616c6116d7872bd"><div class="ttname"><a href="group___a_d_c.html#gabc2d2a9d6b5fe06a8616c6116d7872bd">ri_adc_mcu_samplerate_get</a></div><div class="ttdeci">rd_status_t ri_adc_mcu_samplerate_get(uint8_t *samplerate)</div><div class="ttdoc">rd_sensor_setup_fp </div></div>
<div class="ttc" id="structri__adc__sample__t_html_aab975bd013c959d3468176b2ad337cd5"><div class="ttname"><a href="structri__adc__sample__t.html#aab975bd013c959d3468176b2ad337cd5">ri_adc_sample_t::oversamples</a></div><div class="ttdeci">uint8_t oversamples</div><div class="ttdoc">Number os samples to take, rounded up to nearest possible value. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__interface__adc__mcu_8h_source.html#l00045">ruuvi_interface_adc_mcu.h:45</a></div></div>
<div class="ttc" id="group___error_html_gaf057eb4393594adb3e2f3d7ee9bb5ed1"><div class="ttname"><a href="group___error.html#gaf057eb4393594adb3e2f3d7ee9bb5ed1">RD_ERROR_INTERNAL</a></div><div class="ttdeci">#define RD_ERROR_INTERNAL</div><div class="ttdoc">Internal Error. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__error_8h_source.html#l00030">ruuvi_driver_error.h:30</a></div></div>
<div class="ttc" id="group___a_d_c_html_ga82938817973a1e8f952b4a45dbac96b0"><div class="ttname"><a href="group___a_d_c.html#ga82938817973a1e8f952b4a45dbac96b0">ri_adc_mcu_dsp_get</a></div><div class="ttdeci">rd_status_t ri_adc_mcu_dsp_get(uint8_t *dsp, uint8_t *parameter)</div><div class="ttdoc">rd_sensor_dsp_fp </div></div>
<div class="ttc" id="group___b_m_e280_html_ga59ad04a27678ee7b16070e43227e970b"><div class="ttname"><a href="group___b_m_e280.html#ga59ad04a27678ee7b16070e43227e970b">RETURN_SUCCESS_ON_VALID</a></div><div class="ttdeci">#define RETURN_SUCCESS_ON_VALID(param)</div><div class="ttdoc">Macro for checking &quot;ignored&quot; parameters NO_CHANGE, MIN, MAX, DEFAULT. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__interface__bme280_8c_source.html#l00042">ruuvi_interface_bme280.c:42</a></div></div>
<div class="ttc" id="structrd__sensor__t_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="structrd__sensor__t.html#a8f8f80d37794cde9472343e4487ba3eb">rd_sensor_t::name</a></div><div class="ttdeci">const char * name</div><div class="ttdoc">sensor human-readable name. Should be at most 8 bytes long. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00316">ruuvi_driver_sensor.h:316</a></div></div>
<div class="ttc" id="group___a_d_c_html_gaad0b4578e692ab4c5dd69f6cbbb918ba"><div class="ttname"><a href="group___a_d_c.html#gaad0b4578e692ab4c5dd69f6cbbb918ba">ri_adc_channel_t</a></div><div class="ttdeci">ri_adc_channel_t</div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__interface__adc__mcu_8h_source.html#l00021">ruuvi_interface_adc_mcu.h:21</a></div></div>
<div class="ttc" id="group___a_d_c_html_ga577e037329f2cc6036e9482993a8b6d8"><div class="ttname"><a href="group___a_d_c.html#ga577e037329f2cc6036e9482993a8b6d8">ri_adc_mcu_dsp_set</a></div><div class="ttdeci">rd_status_t ri_adc_mcu_dsp_set(uint8_t *dsp, uint8_t *parameter)</div><div class="ttdoc">rd_sensor_dsp_fp </div></div>
<div class="ttc" id="group___a_d_c_html_gaa4cbdb245fa3e7e454c4cde50f42e82c"><div class="ttname"><a href="group___a_d_c.html#gaa4cbdb245fa3e7e454c4cde50f42e82c">ri_adc_mcu_resolution_set</a></div><div class="ttdeci">rd_status_t ri_adc_mcu_resolution_set(uint8_t *resolution)</div><div class="ttdoc">rd_sensor_setup_fp </div></div>
<div class="ttc" id="structrd__sensor__t_html_a610c7fd98b1cd6e2f966f652ea060ae1"><div class="ttname"><a href="structrd__sensor__t.html#a610c7fd98b1cd6e2f966f652ea060ae1">rd_sensor_t::configuration_get</a></div><div class="ttdeci">rd_configuration_fp configuration_get</div><div class="ttdoc">rd_configuration_fp </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00346">ruuvi_driver_sensor.h:346</a></div></div>
<div class="ttc" id="group___sensor_html_gaa01d6154317c23d3a536abe5d56554ce"><div class="ttname"><a href="group___sensor.html#gaa01d6154317c23d3a536abe5d56554ce">rd_sensor_data_populate</a></div><div class="ttdeci">void rd_sensor_data_populate(rd_sensor_data_t *const target, const rd_sensor_data_t *const provided, const rd_sensor_data_fields_t requested)</div><div class="ttdoc">Populate given target data with data provided by sensor as requested. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8c_source.html#l00186">ruuvi_driver_sensor.c:186</a></div></div>
<div class="ttc" id="group___sensor_html_gac980226ec5044563ad5eeab770ccd6de"><div class="ttname"><a href="group___sensor.html#gac980226ec5044563ad5eeab770ccd6de">RD_SENSOR_CFG_CONTINUOUS</a></div><div class="ttdeci">#define RD_SENSOR_CFG_CONTINUOUS</div><div class="ttdoc">Sensor will keep sampling at defined sample rate. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00081">ruuvi_driver_sensor.h:81</a></div></div>
<div class="ttc" id="group___sensor_html_ga16ac06727f5f9ff7edbd0e3d4e380ee5"><div class="ttname"><a href="group___sensor.html#ga16ac06727f5f9ff7edbd0e3d4e380ee5">RD_SENSOR_CFG_SLEEP</a></div><div class="ttdeci">#define RD_SENSOR_CFG_SLEEP</div><div class="ttdoc">Sensor should go to sleep immediately. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00079">ruuvi_driver_sensor.h:79</a></div></div>
<div class="ttc" id="group___a_d_c_html_ggaad0b4578e692ab4c5dd69f6cbbb918baa7234b4046c9e2fdc3107f1f7d8f7089c"><div class="ttname"><a href="group___a_d_c.html#ggaad0b4578e692ab4c5dd69f6cbbb918baa7234b4046c9e2fdc3107f1f7d8f7089c">RI_ADC_AIN1</a></div><div class="ttdoc">Channel 1 of ADC. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__interface__adc__mcu_8h_source.html#l00024">ruuvi_interface_adc_mcu.h:24</a></div></div>
<div class="ttc" id="group___a_d_c_html_ga8068a4b16310295914c5561667626657"><div class="ttname"><a href="group___a_d_c.html#ga8068a4b16310295914c5561667626657">ri_adc_mcu_scale_get</a></div><div class="ttdeci">rd_status_t ri_adc_mcu_scale_get(uint8_t *scale)</div><div class="ttdoc">rd_sensor_setup_fp </div></div>
<div class="ttc" id="group___a_d_c_html_ggaad0b4578e692ab4c5dd69f6cbbb918baa97d4978d9536976d71e3cb8a35d67412"><div class="ttname"><a href="group___a_d_c.html#ggaad0b4578e692ab4c5dd69f6cbbb918baa97d4978d9536976d71e3cb8a35d67412">RI_ADC_AIN2</a></div><div class="ttdoc">Channel 2 of ADC. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__interface__adc__mcu_8h_source.html#l00025">ruuvi_interface_adc_mcu.h:25</a></div></div>
<div class="ttc" id="structrd__sensor__data__t_html_a57ba9c584cf7756552b7d4370e93395f"><div class="ttname"><a href="structrd__sensor__data__t.html#a57ba9c584cf7756552b7d4370e93395f">rd_sensor_data_t::data</a></div><div class="ttdeci">float * data</div><div class="ttdoc">Data of sensor. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00169">ruuvi_driver_sensor.h:169</a></div></div>
<div class="ttc" id="structrd__sensor__t_html_a3203f1d2710adc5c1671df693154a979"><div class="ttname"><a href="structrd__sensor__t.html#a3203f1d2710adc5c1671df693154a979">rd_sensor_t::samplerate_get</a></div><div class="ttdeci">rd_sensor_setup_fp samplerate_get</div><div class="ttdoc">rd_sensor_setup_fp </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00326">ruuvi_driver_sensor.h:326</a></div></div>
<div class="ttc" id="unionrd__sensor__data__fields__t_html_a4d9e047fe56f3844d6e8ae58eeb2d114"><div class="ttname"><a href="unionrd__sensor__data__fields__t.html#a4d9e047fe56f3844d6e8ae58eeb2d114">rd_sensor_data_fields_t::bitfield</a></div><div class="ttdeci">uint32_t bitfield</div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00156">ruuvi_driver_sensor.h:156</a></div></div>
<div class="ttc" id="structri__adc__sample__t_html_ac1fcaff05d83399369c7e5c498a0a990"><div class="ttname"><a href="structri__adc__sample__t.html#ac1fcaff05d83399369c7e5c498a0a990">ri_adc_sample_t::negative</a></div><div class="ttdeci">ri_adc_channel_t negative</div><div class="ttdoc">Negative channel. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__interface__adc__mcu_8h_source.html#l00041">ruuvi_interface_adc_mcu.h:41</a></div></div>
<div class="ttc" id="structrd__sensor__data__t_html_ad87183c0717974ffaf7a518b6b254c4d"><div class="ttname"><a href="structrd__sensor__data__t.html#ad87183c0717974ffaf7a518b6b254c4d">rd_sensor_data_t::fields</a></div><div class="ttdeci">rd_sensor_data_fields_t fields</div><div class="ttdoc">Description of datafields which may be contained in this sample. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00167">ruuvi_driver_sensor.h:167</a></div></div>
<div class="ttc" id="structrd__sensor__t_html_aac9ba35b03ec68d587dadb1e9a549d62"><div class="ttname"><a href="structrd__sensor__t.html#aac9ba35b03ec68d587dadb1e9a549d62">rd_sensor_t::mode_get</a></div><div class="ttdeci">rd_sensor_setup_fp mode_get</div><div class="ttdoc">rd_sensor_setup_fp </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00338">ruuvi_driver_sensor.h:338</a></div></div>
<div class="ttc" id="group___a_d_c_html_ggaad0b4578e692ab4c5dd69f6cbbb918baa7429bb356650276a582bbc6b23c0fdad"><div class="ttname"><a href="group___a_d_c.html#ggaad0b4578e692ab4c5dd69f6cbbb918baa7429bb356650276a582bbc6b23c0fdad">RI_ADC_AIN3</a></div><div class="ttdoc">Channel 3 of ADC. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__interface__adc__mcu_8h_source.html#l00026">ruuvi_interface_adc_mcu.h:26</a></div></div>
<div class="ttc" id="ruuvi__interface__lis2dh12_8c_html_a1ce9f7d5c0319733886e4ad15273c457"><div class="ttname"><a href="ruuvi__interface__lis2dh12_8c.html#a1ce9f7d5c0319733886e4ad15273c457">resolution</a></div><div class="ttdeci">lis2dh12_op_md_t resolution</div><div class="ttdoc">Resolution, bits. 8, 10, or 12. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__interface__lis2dh12_8c_source.html#l00061">ruuvi_interface_lis2dh12.c:61</a></div></div>
<div class="ttc" id="ruuvi__nrf5__sdk15__error_8h_html"><div class="ttname"><a href="ruuvi__nrf5__sdk15__error_8h.html">ruuvi_nrf5_sdk15_error.h</a></div></div>
<div class="ttc" id="group___error_html_gae0e5361071e84357dbc63011c816a6d8"><div class="ttname"><a href="group___error.html#gae0e5361071e84357dbc63011c816a6d8">RD_UINT64_INVALID</a></div><div class="ttdeci">#define RD_UINT64_INVALID</div><div class="ttdoc">Signal that value should not be used. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__error_8h_source.html#l00025">ruuvi_driver_error.h:25</a></div></div>
<div class="ttc" id="structri__adc__sample__t_html_a10b801d16dc20356af46c4c4cb1d465e"><div class="ttname"><a href="structri__adc__sample__t.html#a10b801d16dc20356af46c4c4cb1d465e">ri_adc_sample_t::positive</a></div><div class="ttdeci">ri_adc_channel_t positive</div><div class="ttdoc">Positive channel. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__interface__adc__mcu_8h_source.html#l00040">ruuvi_interface_adc_mcu.h:40</a></div></div>
<div class="ttc" id="structrd__sensor__t_html_ad657351f3ff1b0603e267670e0de2cb0"><div class="ttname"><a href="structrd__sensor__t.html#ad657351f3ff1b0603e267670e0de2cb0">rd_sensor_t::scale_set</a></div><div class="ttdeci">rd_sensor_setup_fp scale_set</div><div class="ttdoc">rd_sensor_setup_fp </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00332">ruuvi_driver_sensor.h:332</a></div></div>
<div class="ttc" id="structrd__sensor__t_html_aca49b5fc57cc015c94ec0c7a2d6e0424"><div class="ttname"><a href="structrd__sensor__t.html#aca49b5fc57cc015c94ec0c7a2d6e0424">rd_sensor_t::init</a></div><div class="ttdeci">rd_sensor_init_fp init</div><div class="ttdoc">rd_sensor_init_fp </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00320">ruuvi_driver_sensor.h:320</a></div></div>
<div class="ttc" id="structri__adc__sample__t_html"><div class="ttname"><a href="structri__adc__sample__t.html">ri_adc_sample_t</a></div><div class="ttdoc">Define a complex sample. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__interface__adc__mcu_8h_source.html#l00038">ruuvi_interface_adc_mcu.h:38</a></div></div>
<div class="ttc" id="ruuvi__driver__error_8h_html"><div class="ttname"><a href="ruuvi__driver__error_8h.html">ruuvi_driver_error.h</a></div><div class="ttdoc">Ruuvi error codes and error check function. </div></div>
<div class="ttc" id="unionrd__sensor__data__fields__t_html"><div class="ttname"><a href="unionrd__sensor__data__fields__t.html">rd_sensor_data_fields_t</a></div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00154">ruuvi_driver_sensor.h:154</a></div></div>
<div class="ttc" id="group___a_d_c_html_ga6c65cda5596e94b6b874a353b84a650a"><div class="ttname"><a href="group___a_d_c.html#ga6c65cda5596e94b6b874a353b84a650a">ri_adc_mcu_data_get</a></div><div class="ttdeci">rd_status_t ri_adc_mcu_data_get(rd_sensor_data_t *const data)</div><div class="ttdoc">rd_sensor_data_fp </div></div>
<div class="ttc" id="group___sensor_html_ga27ee843513e0399d8525d85c08b3b19d"><div class="ttname"><a href="group___sensor.html#ga27ee843513e0399d8525d85c08b3b19d">RD_SENSOR_CFG_DEFAULT</a></div><div class="ttdeci">#define RD_SENSOR_CFG_DEFAULT</div><div class="ttdoc">Default value, always valid for the sensor. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00067">ruuvi_driver_sensor.h:67</a></div></div>
<div class="ttc" id="group___sensor_html_gac4ac0c3d9e1d34302e7ccbcb4ccd8d1b"><div class="ttname"><a href="group___sensor.html#gac4ac0c3d9e1d34302e7ccbcb4ccd8d1b">RD_SENSOR_CFG_MIN</a></div><div class="ttdeci">#define RD_SENSOR_CFG_MIN</div><div class="ttdoc">Configure smallest supported and implemented value. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00077">ruuvi_driver_sensor.h:77</a></div></div>
<div class="ttc" id="unionrd__sensor__data__fields__t_html_aa6b36985861a38d2a44f73ca08de8a7f"><div class="ttname"><a href="unionrd__sensor__data__fields__t.html#aa6b36985861a38d2a44f73ca08de8a7f">rd_sensor_data_fields_t::datas</a></div><div class="ttdeci">rd_sensor_data_bitfield_t datas</div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00157">ruuvi_driver_sensor.h:157</a></div></div>
<div class="ttc" id="group___a_d_c_html_gab716b999bfad6fd36d4784c9ffd6faaf"><div class="ttname"><a href="group___a_d_c.html#gab716b999bfad6fd36d4784c9ffd6faaf">ri_adc_mcu_mode_get</a></div><div class="ttdeci">rd_status_t ri_adc_mcu_mode_get(uint8_t *mode)</div><div class="ttdoc">rd_sensor_setup_fp </div></div>
<div class="ttc" id="group___sensor_html_gae7305d498d150e2149e14001ff71292d"><div class="ttname"><a href="group___sensor.html#gae7305d498d150e2149e14001ff71292d">rd_sensor_timestamp_get</a></div><div class="ttdeci">uint64_t rd_sensor_timestamp_get(void)</div><div class="ttdoc">Calls the timestamp function and returns its value. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8c_source.html#l00054">ruuvi_driver_sensor.c:54</a></div></div>
<div class="ttc" id="structrd__sensor__data__t_html"><div class="ttname"><a href="structrd__sensor__data__t.html">rd_sensor_data_t</a></div><div class="ttdoc">Generic sensor data struct. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00163">ruuvi_driver_sensor.h:163</a></div></div>
<div class="ttc" id="structrd__sensor__t_html_a01867146e57cb448cc9a4f3f35adc1d1"><div class="ttname"><a href="structrd__sensor__t.html#a01867146e57cb448cc9a4f3f35adc1d1">rd_sensor_t::data_get</a></div><div class="ttdeci">rd_sensor_data_fp data_get</div><div class="ttdoc">rd_sensor_data_fp </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00348">ruuvi_driver_sensor.h:348</a></div></div>
<div class="ttc" id="structrd__sensor__t_html_a7a9ac39c30235d0989193fadf5a97a4a"><div class="ttname"><a href="structrd__sensor__t.html#a7a9ac39c30235d0989193fadf5a97a4a">rd_sensor_t::provides</a></div><div class="ttdeci">rd_sensor_data_fields_t provides</div><div class="ttdoc">Description of data fields the sensor is able to provide. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00318">ruuvi_driver_sensor.h:318</a></div></div>
<div class="ttc" id="group___a_d_c_html_gacf768af2ab535a95f8ba2781c1cdbd0b"><div class="ttname"><a href="group___a_d_c.html#gacf768af2ab535a95f8ba2781c1cdbd0b">ri_adc_mcu_scale_set</a></div><div class="ttdeci">rd_status_t ri_adc_mcu_scale_set(uint8_t *scale)</div><div class="ttdoc">rd_sensor_setup_fp </div></div>
<div class="ttc" id="ruuvi__driver__enabled__modules_8h_html"><div class="ttname"><a href="ruuvi__driver__enabled__modules_8h.html">ruuvi_driver_enabled_modules.h</a></div><div class="ttdoc">Header to enable and disable module compilation. </div></div>
<div class="ttc" id="group___sensor_html_gadab766cde8260b73a0822f6ee0346775"><div class="ttname"><a href="group___sensor.html#gadab766cde8260b73a0822f6ee0346775">rd_bus_t</a></div><div class="ttdeci">rd_bus_t</div><div class="ttdoc">Type of bus sensor uses. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00114">ruuvi_driver_sensor.h:114</a></div></div>
<div class="ttc" id="group___sensor_html_gad0abf298a0f1a279ef40a83313797274"><div class="ttname"><a href="group___sensor.html#gad0abf298a0f1a279ef40a83313797274">RD_SENSOR_CFG_NO_CHANGE</a></div><div class="ttdeci">#define RD_SENSOR_CFG_NO_CHANGE</div><div class="ttdoc">Do not change configured value. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00082">ruuvi_driver_sensor.h:82</a></div></div>
<div class="ttc" id="structrd__sensor__t_html_a8674da38bab8839ac977c52192e55400"><div class="ttname"><a href="structrd__sensor__t.html#a8674da38bab8839ac977c52192e55400">rd_sensor_t::dsp_set</a></div><div class="ttdeci">rd_sensor_dsp_fp dsp_set</div><div class="ttdoc">rd_sensor_dsp_fp </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00340">ruuvi_driver_sensor.h:340</a></div></div>
<div class="ttc" id="group___a_d_c_html_gab8b7ccc9a1cd3487dadb6e10dd026a9c"><div class="ttname"><a href="group___a_d_c.html#gab8b7ccc9a1cd3487dadb6e10dd026a9c">ri_adc_mcu_uninit</a></div><div class="ttdeci">rd_status_t ri_adc_mcu_uninit(rd_sensor_t *adc_sensor, rd_bus_t bus, uint8_t handle)</div><div class="ttdoc">rd_sensor_init_fp </div></div>
<div class="ttc" id="structrd__sensor__t_html_aef26a7af582572cb21c286ea07b1c9d7"><div class="ttname"><a href="structrd__sensor__t.html#aef26a7af582572cb21c286ea07b1c9d7">rd_sensor_t::resolution_set</a></div><div class="ttdeci">rd_sensor_setup_fp resolution_set</div><div class="ttdoc">rd_sensor_setup_fp </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00328">ruuvi_driver_sensor.h:328</a></div></div>
<div class="ttc" id="group___error_html_gaa610810ee301b53ad1f292898e5b5564"><div class="ttname"><a href="group___error.html#gaa610810ee301b53ad1f292898e5b5564">RD_ERROR_NOT_SUPPORTED</a></div><div class="ttdeci">#define RD_ERROR_NOT_SUPPORTED</div><div class="ttdoc">Not supported. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__error_8h_source.html#l00033">ruuvi_driver_error.h:33</a></div></div>
<div class="ttc" id="group___a_d_c_html_ggaad0b4578e692ab4c5dd69f6cbbb918baa7f05a4c31adcd9efb8b71c91aab6cf50"><div class="ttname"><a href="group___a_d_c.html#ggaad0b4578e692ab4c5dd69f6cbbb918baa7f05a4c31adcd9efb8b71c91aab6cf50">RI_ADC_AINVDD</a></div><div class="ttdoc">Analog supply voltage. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__interface__adc__mcu_8h_source.html#l00031">ruuvi_interface_adc_mcu.h:31</a></div></div>
<div class="ttc" id="ruuvi__interface__adc__mcu_8h_html"><div class="ttname"><a href="ruuvi__interface__adc__mcu_8h.html">ruuvi_interface_adc_mcu.h</a></div><div class="ttdoc">Interface for controlling ADC onboard MCU. </div></div>
<div class="ttc" id="group___error_html_ga3e1919cc1fe75cb7f12af047f6f4ce55"><div class="ttname"><a href="group___error.html#ga3e1919cc1fe75cb7f12af047f6f4ce55">rd_status_t</a></div><div class="ttdeci">uint32_t rd_status_t</div><div class="ttdoc">bitfield for representing errors </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__error_8h_source.html#l00054">ruuvi_driver_error.h:54</a></div></div>
<div class="ttc" id="structrd__sensor__t_html_a547b8fa075f87175a5add0d871a65398"><div class="ttname"><a href="structrd__sensor__t.html#a547b8fa075f87175a5add0d871a65398">rd_sensor_t::uninit</a></div><div class="ttdeci">rd_sensor_init_fp uninit</div><div class="ttdoc">rd_sensor_init_fp </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00322">ruuvi_driver_sensor.h:322</a></div></div>
<div class="ttc" id="ruuvi__interface__lis2dh12_8c_html_a37e90f5e3bd99fac2021fb3a326607d4"><div class="ttname"><a href="ruuvi__interface__lis2dh12_8c.html#a37e90f5e3bd99fac2021fb3a326607d4">mode</a></div><div class="ttdeci">uint8_t mode</div><div class="ttdoc">Operating mode. Sleep, single or continuous. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__interface__lis2dh12_8c_source.html#l00065">ruuvi_interface_lis2dh12.c:65</a></div></div>
<div class="ttc" id="group___a_d_c_html_gaba7ad9b945c496c6b86e1bae9f602321"><div class="ttname"><a href="group___a_d_c.html#gaba7ad9b945c496c6b86e1bae9f602321">ri_adc_mcu_init</a></div><div class="ttdeci">rd_status_t ri_adc_mcu_init(rd_sensor_t *adc_sensor, rd_bus_t bus, uint8_t handle)</div><div class="ttdoc">rd_sensor_init_fp </div></div>
<div class="ttc" id="group___error_html_gaa4410afd73d0413bf194b93adcf15286"><div class="ttname"><a href="group___error.html#gaa4410afd73d0413bf194b93adcf15286">RD_FLOAT_INVALID</a></div><div class="ttdeci">#define RD_FLOAT_INVALID</div><div class="ttdoc">Signal that value should not be used. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__error_8h_source.html#l00024">ruuvi_driver_error.h:24</a></div></div>
<div class="ttc" id="group___a_d_c_html_ga49fe211e56621c31bb4dc96148656599"><div class="ttname"><a href="group___a_d_c.html#ga49fe211e56621c31bb4dc96148656599">ri_adc_mcu_mode_set</a></div><div class="ttdeci">rd_status_t ri_adc_mcu_mode_set(uint8_t *mode)</div><div class="ttdoc">rd_sensor_setup_fp </div></div>
<div class="ttc" id="group___a_d_c_html_ggaad0b4578e692ab4c5dd69f6cbbb918baad06af27aa4aec28780bc71c790a63a43"><div class="ttname"><a href="group___a_d_c.html#ggaad0b4578e692ab4c5dd69f6cbbb918baad06af27aa4aec28780bc71c790a63a43">RI_ADC_AIN7</a></div><div class="ttdoc">Channel 7 of ADC. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__interface__adc__mcu_8h_source.html#l00030">ruuvi_interface_adc_mcu.h:30</a></div></div>
<div class="ttc" id="group___sensor_html_ga27d1f7122c8541124336b10d330bb18a"><div class="ttname"><a href="group___sensor.html#ga27d1f7122c8541124336b10d330bb18a">RD_SENSOR_CFG_MAX</a></div><div class="ttdeci">#define RD_SENSOR_CFG_MAX</div><div class="ttdoc">Configure largest supported and implemented value. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00078">ruuvi_driver_sensor.h:78</a></div></div>
<div class="ttc" id="structrd__sensor__t_html_a47a9475a2d1830a68997c1e1aa2623bd"><div class="ttname"><a href="structrd__sensor__t.html#a47a9475a2d1830a68997c1e1aa2623bd">rd_sensor_t::resolution_get</a></div><div class="ttdeci">rd_sensor_setup_fp resolution_get</div><div class="ttdoc">rd_sensor_setup_fp </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00330">ruuvi_driver_sensor.h:330</a></div></div>
<div class="ttc" id="group___a_d_c_html_ggaad0b4578e692ab4c5dd69f6cbbb918baa56337981b53de4bb821ff217882f49c0"><div class="ttname"><a href="group___a_d_c.html#ggaad0b4578e692ab4c5dd69f6cbbb918baa56337981b53de4bb821ff217882f49c0">RI_ADC_AIN0</a></div><div class="ttdoc">Channel 0 of ADC. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__interface__adc__mcu_8h_source.html#l00023">ruuvi_interface_adc_mcu.h:23</a></div></div>
<div class="ttc" id="structrd__sensor__data__bitfield__t_html_a65955763a053b1b3aa3c630e69d65f35"><div class="ttname"><a href="structrd__sensor__data__bitfield__t.html#a65955763a053b1b3aa3c630e69d65f35">rd_sensor_data_bitfield_t::voltage_v</a></div><div class="ttdeci">unsigned int voltage_v</div><div class="ttdoc">Voltage, volts. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00150">ruuvi_driver_sensor.h:150</a></div></div>
<div class="ttc" id="group___error_html_ga03d5122e7da115a54aa89f1ba7eca4e8"><div class="ttname"><a href="group___error.html#ga03d5122e7da115a54aa89f1ba7eca4e8">RD_ERROR_INVALID_PARAM</a></div><div class="ttdeci">#define RD_ERROR_INVALID_PARAM</div><div class="ttdoc">Invalid Parameter. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__error_8h_source.html#l00034">ruuvi_driver_error.h:34</a></div></div>
<div class="ttc" id="group___sensor_html_ga28abfb1e3e8aba187af41ca748b0421f"><div class="ttname"><a href="group___sensor.html#ga28abfb1e3e8aba187af41ca748b0421f">rd_sensor_uninitialize</a></div><div class="ttdeci">void rd_sensor_uninitialize(rd_sensor_t *const p_sensor)</div><div class="ttdoc">Mark sensor as uninitialized by calling the generic initialization. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8c_source.html#l00142">ruuvi_driver_sensor.c:142</a></div></div>
<div class="ttc" id="structrd__sensor__t_html_a2c973a62c9f5735465239e7d0273e53f"><div class="ttname"><a href="structrd__sensor__t.html#a2c973a62c9f5735465239e7d0273e53f">rd_sensor_t::configuration_set</a></div><div class="ttdeci">rd_configuration_fp configuration_set</div><div class="ttdoc">rd_configuration_fp </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00344">ruuvi_driver_sensor.h:344</a></div></div>
<div class="ttc" id="group___sensor_html_ga4143a86b19f3bd658a355a68390cc230"><div class="ttname"><a href="group___sensor.html#ga4143a86b19f3bd658a355a68390cc230">rd_sensor_initialize</a></div><div class="ttdeci">void rd_sensor_initialize(rd_sensor_t *const p_sensor)</div><div class="ttdoc">Initialize sensor struct with non-null pointers which return RD_ERROR_NOT_INITIALIZED. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8c_source.html#l00117">ruuvi_driver_sensor.c:117</a></div></div>
<div class="ttc" id="structrd__sensor__t_html_aefa3f417f23fcad7f54033d83548f8b5"><div class="ttname"><a href="structrd__sensor__t.html#aefa3f417f23fcad7f54033d83548f8b5">rd_sensor_t::scale_get</a></div><div class="ttdeci">rd_sensor_setup_fp scale_get</div><div class="ttdoc">rd_sensor_setup_fp </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00334">ruuvi_driver_sensor.h:334</a></div></div>
<div class="ttc" id="group___error_html_ga223073973d9bc6407b7f9cc42a8d8fca"><div class="ttname"><a href="group___error.html#ga223073973d9bc6407b7f9cc42a8d8fca">RD_ERROR_NULL</a></div><div class="ttdeci">#define RD_ERROR_NULL</div><div class="ttdoc">Null Pointer. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__error_8h_source.html#l00041">ruuvi_driver_error.h:41</a></div></div>
<div class="ttc" id="structrd__sensor__t_html_a8e676900bd180defb6b537c9b3ef6ab2"><div class="ttname"><a href="structrd__sensor__t.html#a8e676900bd180defb6b537c9b3ef6ab2">rd_sensor_t::mode_set</a></div><div class="ttdeci">rd_sensor_setup_fp mode_set</div><div class="ttdoc">rd_sensor_setup_fp </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00336">ruuvi_driver_sensor.h:336</a></div></div>
<div class="ttc" id="group___a_d_c_html_ggaad0b4578e692ab4c5dd69f6cbbb918baa42a773039e6d2ed0b52ea906a99e3e9c"><div class="ttname"><a href="group___a_d_c.html#ggaad0b4578e692ab4c5dd69f6cbbb918baa42a773039e6d2ed0b52ea906a99e3e9c">RI_ADC_AIN4</a></div><div class="ttdoc">Channel 4 of ADC. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__interface__adc__mcu_8h_source.html#l00027">ruuvi_interface_adc_mcu.h:27</a></div></div>
<div class="ttc" id="group___sensor_html_ga3f7af9b82cd8b556694f301d051ea8c3"><div class="ttname"><a href="group___sensor.html#ga3f7af9b82cd8b556694f301d051ea8c3">rd_sensor_configuration_get</a></div><div class="ttdeci">rd_status_t rd_sensor_configuration_get(const rd_sensor_t *sensor, rd_sensor_configuration_t *config)</div><div class="ttdoc">implementation of ref rd_configuration_fp </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8c_source.html#l00027">ruuvi_driver_sensor.c:27</a></div></div>
<div class="ttc" id="ruuvi__interface__lis2dh12_8c_html_ae5d83dfa04a0457180fe327ab7895db0"><div class="ttname"><a href="ruuvi__interface__lis2dh12_8c.html#ae5d83dfa04a0457180fe327ab7895db0">scale</a></div><div class="ttdeci">lis2dh12_fs_t scale</div><div class="ttdoc">Scale, gravities. 2, 4, 8 or 16. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__interface__lis2dh12_8c_source.html#l00062">ruuvi_interface_lis2dh12.c:62</a></div></div>
<div class="ttc" id="group___a_d_c_html_ga8c3addcedf46e2659dd8f1c2287f5408"><div class="ttname"><a href="group___a_d_c.html#ga8c3addcedf46e2659dd8f1c2287f5408">ri_adc_mcu_samplerate_set</a></div><div class="ttdeci">rd_status_t ri_adc_mcu_samplerate_set(uint8_t *samplerate)</div><div class="ttdoc">rd_sensor_setup_fp </div></div>
<div class="ttc" id="group___a_d_c_html_gaa79039867dd9a1c66cdaed728b57cef4"><div class="ttname"><a href="group___a_d_c.html#gaa79039867dd9a1c66cdaed728b57cef4">ri_adc_mcu_resolution_get</a></div><div class="ttdeci">rd_status_t ri_adc_mcu_resolution_get(uint8_t *resolution)</div><div class="ttdoc">rd_sensor_setup_fp </div></div>
<div class="ttc" id="group___sensor_html_gaebd21c0bd2498ed9118b7add24890c89"><div class="ttname"><a href="group___sensor.html#gaebd21c0bd2498ed9118b7add24890c89">RD_SENSOR_CFG_SINGLE</a></div><div class="ttdeci">#define RD_SENSOR_CFG_SINGLE</div><div class="ttdoc">Sensor should go to sleep after single measurement. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00080">ruuvi_driver_sensor.h:80</a></div></div>
<div class="ttc" id="group___sensor_html_ga319369cd5bda2a83c6da03b45bca8e71"><div class="ttname"><a href="group___sensor.html#ga319369cd5bda2a83c6da03b45bca8e71">RD_SENSOR_DSP_OS</a></div><div class="ttdeci">#define RD_SENSOR_DSP_OS</div><div class="ttdoc">Oversample sensor values. Parameter: Number of samples. </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8h_source.html#l00088">ruuvi_driver_sensor.h:88</a></div></div>
<div class="ttc" id="group___sensor_html_gaaf4a077bf0a441ca9bc482cf454f6503"><div class="ttname"><a href="group___sensor.html#gaaf4a077bf0a441ca9bc482cf454f6503">rd_sensor_configuration_set</a></div><div class="ttdeci">rd_status_t rd_sensor_configuration_set(const rd_sensor_t *sensor, rd_sensor_configuration_t *config)</div><div class="ttdoc">implementation of ref rd_configuration_fp </div><div class="ttdef"><b>Definition:</b> <a href="ruuvi__driver__sensor_8c_source.html#l00008">ruuvi_driver_sensor.c:8</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_45b1fc868d4bfdaf2f0c442fc62768f6.html">nrf5_sdk15_platform</a></li><li class="navelem"><a class="el" href="dir_b075f1b43de013d6c205f38e229464b7.html">adc</a></li><li class="navelem"><a class="el" href="ruuvi__nrf5__sdk15__adc__mcu_8c.html">ruuvi_nrf5_sdk15_adc_mcu.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
